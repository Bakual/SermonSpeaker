webpackJsonpjwplayer([2],{87:function(a,b,c){var d,e;d=[c(38),c(49),c(50),c(53),c(74),c(88)],e=function(a,b,c,d,e,f){function g(a){var b=a/1e3;return Math.floor(b).toLocaleString()+" kbps"}function h(h){function i(){this.state===c.LOADING&&this.setState(c.PLAYING)}function j(a,b){switch(b.schemeIdUri){case"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":case"edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":var c="com.widevine.alpha",d=a.widevine.url;return d||(console.log("No licensing server specified for widevine. Defaulting to proxy."),d="http://widevine-proxy.appspot.com/proxy"),new f.player.DrmSchemeInfo(c,d,!1,null,null);default:return console.log("Unrecognized scheme: "+b.schemeIdUri),null}}function k(a){console.error(a);var b="Unknown playback error";G.sendEvent(d.JWPLAYER_MEDIA_ERROR,{message:"Error playing file:"+b})}function l(){return this.levels}function m(){return this.currentQuality}function n(b){this.setState(c.LOADING);var d=b.sources[0].file,e=b.sources[0].drm||{},g=b.startTime,h=new f.util.EWMABandwidthEstimator,i=a.partial(j,e),k=new f.player.DashVideoSource(d,i,h),l=F.load(k);l.then(o.bind(this)),b.starttime&&l.then(function(){this.seek(g)}.bind(this))}function o(){G.sendEvent(d.JWPLAYER_MEDIA_BUFFER_FULL);var b=F.getVideoTracks();b.length>1&&(this.currentQuality=0,this.levels=a.map(b,function(a){return{label:g(a.bandwidth),level_id:a.id}}),this.levels.unshift({label:"Auto",level_id:"auto"}),G.sendEvent(d.JWPLAYER_MEDIA_LEVELS,{levels:this.levels,currentQuality:this.currentQuality}))}function p(){G.sendEvent(d.JWPLAYER_MEDIA_META,{duration:E.duration,height:E.videoHeight,width:E.videoWidth})}function q(a){E.muted=a}function r(){E.pause(),this.setState(c.PAUSED)}function s(){E.play(),this.setState(c.BUFFERING),this.setVisibility(!0)}function t(a){E.currentTime=a,this.sendEvent(d.JWPLAYER_MEDIA_SEEK,{position:E.currentTime,offset:a})}function u(a){a=!!a,a?b.style(C,{visibility:"visible",opacity:1}):b.style(C,{visibility:"",opacity:0})}function v(){F.unload(),C===E.parentNode&&C.removeChild(E)}function w(){E.pause(),this.setState(c.IDLE)}function x(a){C=a,C.appendChild(E)}function y(){return C}function z(a){if(a=parseInt(a,10),!(this.currentQuality===a||0>a||a>=this.levels.length)){if(0===a)F.enableAdaptation(!0);else{var b=this.levels[a].level_id;F.enableAdaptation(!1),this.setState(c.LOADING),F.selectVideoTrack(b)}this.currentQuality=a,this.sendEvent(d.JWPLAYER_MEDIA_LEVEL_CHANGED,{currentQuality:this.currentQuality,levels:this.levels})}}function A(){var a=E.currentTime;Math.abs(a-this.position)<1&&G.state===c.BUFFERING&&G.setState(c.PLAYING),this.position=a,G.sendEvent(d.JWPLAYER_MEDIA_TIME,{position:a,duration:E.duration,quality:1}),a>E.duration-.1&&E.duration>1&&(G.setState(c.IDLE),G.sendEvent(d.JWPLAYER_MEDIA_COMPLETE))}function B(a){E.volume=a/100}var C,D=document.getElementById(h),E=D?D.querySelector("video"):void 0;E=E||document.createElement("video");var F=new f.player.Player(E),G=this;this.position=0,this.levels=[],this.currentQuality=-1,a.extend(this,new e("shaka"),{load:n,mute:q,pause:r,getQualityLevels:l.bind(this),getCurrentQuality:m.bind(this),play:s,seek:t,remove:v,setContainer:x,getContainer:y,setCurrentQuality:z.bind(this),setVisibility:u,stop:w,volume:B,supportsFullscreen:a.constant(!0),getName:a.constant({name:"shaka"})}),F.addEventListener("error",k),E.addEventListener("loadedmetadata",p.bind(this)),E.addEventListener("timeupdate",A.bind(this)),E.addEventListener("playing",i.bind(this))}f.polyfill.installAll();var i=["ads","enterprise","premium"];return h.supports=function(b,c){if(b.drm&&"ads"!==c&&"enterprise"!==c)return!1;var d=!1;return b.file?"dash"===b.type||"mpd"===b.type?d=!0:(b.file.indexOf(".mpd")>-1||b.file.indexOf("mpd-time-csf")>-1)&&(d=!0):d=!0,window.MediaSource||(d=!1),d&&a.contains(i,c)},{register:function(a){a.api.registerProvider(h)}}}.apply(b,d),!(void 0!==e&&(a.exports=e))},88:function(a,b,c){var d;!function(){var e={};(function(a){function b(a,b){var c=a.split("."),d=Bd;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)c.length||void 0===b?d=d[e]?d[e]:d[e]={}:d[e]=b}function c(a,b){function c(){}c.prototype=b.prototype,a.bf=b.prototype,a.prototype=new c,a.prototype.constructor=a,a.Ze=function(a,c,d){return b.prototype[c].apply(a,Array.prototype.slice.call(arguments,2))}}function d(a){var b=console[a];b?b.bind||(console[a]=function(){b.apply(console,arguments)}):console[a]=function(){}}function e(a){Dd[a]={Ab:Cd(),end:NaN}}function f(a){(a=Dd[a])&&(a.end=Cd())}function g(a){return(a=Dd[a])&&a.end?a.end-a.Ab:NaN}function h(a,b,c){this.id=a,this.bandwidth=b||0,this.lang=c||"unknown",this.active=!1}function i(a,b){this.id=a,this.lang=b||"unknown",this.enabled=this.active=!1}function j(a,b,c,d){this.id=a,this.bandwidth=b||0,this.width=c||0,this.height=d||0,this.active=!1}function k(a,b){var c=a.width*a.height,d=b.width*b.height;return d>c?-1:c>d?1:a.bandwidth<b.bandwidth?-1:a.bandwidth>b.bandwidth?1:0}function l(){var b="CustomEvent"in a;if(b)try{new CustomEvent("")}catch(c){b=!1}b||(a.CustomEvent=m)}function m(a,b){var c=document.createEvent("CustomEvent"),d=b||{bubbles:!1,cancelable:!1,detail:null};return c.initCustomEvent(a,!!d.bubbles,!!d.cancelable,d.detail),c}function n(){var a=Element.prototype;a.requestFullscreen=a.requestFullscreen||a.mozRequestFullScreen||a.msRequestFullscreen||a.webkitRequestFullscreen,a=Document.prototype,a.exitFullscreen=a.exitFullscreen||a.mozCancelFullScreen||a.msExitFullscreen||a.webkitExitFullscreen,"fullscreenElement"in document||Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement}}),document.addEventListener("webkitfullscreenchange",o),document.addEventListener("webkitfullscreenerror",o),document.addEventListener("mozfullscreenchange",o),document.addEventListener("mozfullscreenerror",o),document.addEventListener("MSFullscreenChange",o),document.addEventListener("MSFullscreenError",o)}function o(a){var b=a.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),b=new Event(b,a);a.target.dispatchEvent(b)}function p(){return Promise.reject(Error("The key system specified is not supported."))}function q(a){return null==a?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}function r(){throw new TypeError("Illegal constructor.")}function s(){throw new TypeError("Illegal constructor.")}function t(){var a=HTMLVideoElement.prototype;a.getVideoPlaybackQuality||(a.getVideoPlaybackQuality=function(){return"webkitDroppedFrameCount"in this?{corruptedVideoFrames:0,droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,creationTime:null,totalFrameDelay:null}:null})}function u(a,b){for(var c={},d=0;d<a.length;++d){var e=b?b(a[d]):a[d].toString();c[e]=a[d]}var f,d=[];for(f in c)d.push(c[f]);return d}function v(){return Date.now()+Ed}function w(a,b){this.j=a,this.Gc=b==Fd,this.i=0}function x(a){var b=a.j.getUint8(a.i);return a.i+=1,b}function y(a){var b=a.j.getUint32(a.i,a.Gc);return a.i+=4,b}function z(a){var b,c;if(a.Gc?(b=a.j.getUint32(a.i,!0),c=a.j.getUint32(a.i+4,!0)):(c=a.j.getUint32(a.i,!1),b=a.j.getUint32(a.i+4,!1)),c>2097151)throw new RangeError("DataViewReader: Overflow reading 64-bit value.");return a.i+=8,c*Math.pow(2,32)+b}function A(a){if(a.i+16>a.j.byteLength)throw new RangeError("DataViewReader: Read past end of DataView.");var b=new Uint8Array(a.j.buffer,a.i,16);return a.i+=16,b}function B(a,b){if(a.i+b>a.j.byteLength)throw new RangeError("DataViewReader: Skip past end of DataView.");a.i+=b}function C(a){this.j=a,this.Wa=new w(a,0),Gd||(Gd=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])])}function D(a){var b;if(b=E(a),7<b.length)throw new RangeError("EbmlParser: EBML ID must be at most 7 bytes.");for(var c=0,d=0;d<b.length;d++)c=256*c+b[d];b=c,c=E(a);a:{for(d=0;d<Gd.length;d++)if(fa(c,Gd[d])){d=!0;break a}d=!1}if(d)throw new RangeError("EbmlParser: Element cannot contain dynamically sized data.");if(8==c.length&&224&c[1])throw new RangeError("EbmlParser: Variable sized integer value must be at most 53 bits.");for(var d=c[0]&(1<<8-c.length)-1,e=1;e<c.length;e++)d=256*d+c[e];return c=d,c=a.Wa.i+c<=a.j.byteLength?c:a.j.byteLength-a.Wa.i,d=new DataView(a.j.buffer,a.j.byteOffset+a.Wa.i,c),B(a.Wa,c),new F(b,d)}function E(a){var b,c=x(a.Wa);for(b=1;8>=b&&!(c&1<<8-b);b++);if(b>8)throw new RangeError("EbmlParser: Variable sized integer must fit within 8 bytes.");var d=new Uint8Array(b);for(d[0]=c,c=1;b>c;c++)d[c]=x(a.Wa);return d}function F(a,b){this.id=a,this.j=b}function G(a){if(8<a.j.byteLength)throw new RangeError("EbmlElement: Unsigned integer has too many bytes.");if(8==a.j.byteLength&&224&a.j.getUint8(0))throw new RangeError("EbmlParser: Unsigned integer must be at most 53 bits.");for(var b=0,c=0;c<a.j.byteLength;c++)var d=a.j.getUint8(c),b=256*b+d;return b}function H(a){this.Yc=Math.exp(Math.log(.5)/a),this.rc=this.yc=0}function I(a){return a.yc/(1-Math.pow(a.Yc,a.rc))}function J(a){var b,c=new CustomEvent(a.type,{detail:a.detail,bubbles:!!a.bubbles});for(b in a)b in c||(c[b]=a[b]);return c}function K(a){return new CustomEvent("error",{detail:a,bubbles:!0})}function L(a,b,c){return M(b),M(c),c==b||a>=Hd&&c==b.split("-")[0]||a>=Id&&c.split("-")[0]==b.split("-")[0]?!0:!1}function M(a){a=a.toLowerCase().split("-");var b=Jd[a[0]];return b&&(a[0]=b),a.join("-")}function N(a){return Object.keys(a).map(function(b){return a[b]})}function O(){this.ca={}}function P(a){var b,c=[];for(b in a.ca)c.push.apply(c,a.ca[b]);return c}function Q(){this.fb=new O}function R(a,b,c,d){b=new T(b,c,d),a.fb.push(c,b)}function S(a){for(var b=P(a.fb),c=0;c<b.length;++c)b[c].bb();a.fb.clear()}function T(a,b,c){this.target=a,this.type=b,this.pd=c,this.target.addEventListener(b,c,!1)}function U(a){this.Fc=new O,this.parent=a}function V(a,b){b.currentTarget=a;for(var c=a.Fc.get(b.type)||[],d=0;d<c.length;++d){var e=c[d];try{e.handleEvent?e.handleEvent(b):e.call(a,b)}catch(f){}}return a.parent&&b.bubbles&&V(a.parent,b),b.defaultPrevented}function W(){U.call(this,null),this.zc=new H(3),this.Gd=new H(10),this.ge=50,this.Qd=5e5,this.he=.5,this.fe=65536,this.md=0}function X(){var a,b,c=new Promise(function(c,d){a=c,b=d});return c.resolve=a,c.reject=b,c}function Y(){this.Tc=new X,this.la=!1,this.za=null,this.Ka=[],this.La=null}function Z(a,b){var c,d=a.Ka[0](b);d?(c=d[0],a.La=d[1]):(c=Promise.resolve(),a.La=null),c.then(function(a){this.za?(this.Ka=[],this.La=null,$(this)):(this.Ka.shift(),this.Ka.length?Z(this,a):(this.Tc.resolve(a),this.La=null))}.bind(a))["catch"](function(){this.Ka=[],this.La=null,this.za&&$(this)}.bind(a))}function $(b){var c=Error("Task aborted.");c.type="aborted",b.Tc.reject(c),a.setTimeout(function(){this.za.resolve(),this.za=null}.bind(b),5)}function _(a,b){return b.bind(a)}function aa(a){return String.fromCharCode.apply(null,a)}function ba(a){for(var b=new Uint8Array(a.length),c=0;c<a.length;++c)b[c]=a.charCodeAt(c);return b}function ca(b,c){var d=void 0==c?!0:c,e=a.btoa(aa(b)).replace(/\+/g,"-").replace(/\//g,"_");return d?e:e.replace(/=*$/,"")}function da(b){return ba(a.atob(b.replace(/-/g,"+").replace(/_/g,"/")))}function ea(a){for(var b="",c=0;c<a.length;++c){var d=a[c].toString(16);1==d.length&&(d="0"+d),b+=d}return b}function fa(a,b){if(!a&&!b)return!0;if(!a||!b||a.length!=b.length)return!1;for(var c=0;c<a.length;++c)if(a[c]!=b[c])return!1;return!0}function ga(a,b,c,d,e,f,g,h,i,j,k){this.keySystem=a,this.de=b,this.withCredentials=c,this.Qa=[],this.nd=e||null,this.od=f||null,this.Rd=g==Kd,this.Fe=h==Ld,this.Dd=k||null,d&&this.Qa.push(d)}function ha(a){this.body=a,this.headers={}}function ia(){this.minBandwidth=this.maxBandwidth=this.maxWidth=this.maxHeight=null}function ja(){return new ga("","",!1,null)}function ka(a,b){a.Qa=u(a.Qa.concat(b.Qa),function(a){return Array.prototype.join.apply(a.initData)})}function la(a,b){try{var c=new na(a,b);return Promise.resolve(c)}catch(d){return Promise.reject(d)}}function ma(a){var b=this.mediaKeys;return b&&b!=a&&pa(b,null),delete this.mediaKeys,(this.mediaKeys=a)&&pa(a,this),Promise.resolve()}function na(a,b){this.jb=this.keySystem=a;var c=!0;"org.w3.clearkey"==a&&(this.jb="webkit-org.w3.clearkey",c=!1);var d,e=!1;d=document.getElementsByTagName("video"),d=d.length?d[0]:document.createElement("video");for(var f=0;f<b.length;++f){var g=b[f],h={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:g.initDataTypes},i=!1;if(g.audioCapabilities)for(var j=0;j<g.audioCapabilities.length;++j){var k=g.audioCapabilities[j];k.contentType&&(i=!0,d.canPlayType(k.contentType.split(";")[0],this.jb)&&(h.audioCapabilities.push(k),e=!0))}if(g.videoCapabilities)for(j=0;j<g.videoCapabilities.length;++j)k=g.videoCapabilities[j],k.contentType&&(i=!0,d.canPlayType(k.contentType,this.jb)&&(h.videoCapabilities.push(k),e=!0));if(i||(e=d.canPlayType("video/mp4",this.jb)||d.canPlayType("video/webm",this.jb)),"required"==g.persistentState&&(c?h.persistentState="required":e=!1),e)return void(this.Pd=h)}throw Error("None of the requested configurations were supported.")}function oa(a){this.Ra=a,this.Ia=null,this.l=new Q,this.td=[],this.Ed={}}function pa(a,b){a.Ia=b,S(a.l),b&&(R(a.l,b,"webkitneedkey",a.Ee.bind(a)),R(a.l,b,"webkitkeymessage",a.De.bind(a)),R(a.l,b,"webkitkeyadded",a.Be.bind(a)),R(a.l,b,"webkitkeyerror",a.Ce.bind(a)))}function qa(a,b){var c=a.Ed[b];return c?c:(c=a.td.shift())?(c.sessionId=b,a.Ed[b]=c):null}function ra(a,b,c){U.call(this,null),this.Ia=a,this.ld=!1,this.T=this.aa=null,this.Ra=b,this.sc=c,this.sessionId="",this.expiration=NaN,this.closed=new X,this.keyStatuses=new va}function sa(a,b,c){if(a.ld)return Promise.reject(Error("The session is already initialized."));a.ld=!0;try{var d;if("persistent-license"==a.sc)if(c)d=ba("LOAD_SESSION|"+c);else{var e=new Uint8Array(b);d=ba("PERSISTENT|"+aa(e))}else d=new Uint8Array(b)}catch(f){return Promise.reject(f)}a.aa=new X;try{a.Ia.webkitGenerateKeyRequest(a.Ra,d)}catch(g){if("InvalidStateError"!=g.name)return a.aa=null,Promise.reject(g);setTimeout(function(){try{this.Ia.webkitGenerateKeyRequest(this.Ra,d)}catch(a){this.aa.reject(a),this.aa=null}}.bind(a),10)}return a.aa}function ta(a,b){var c=a.keyStatuses;c.size=void 0==b?0:1,c.wa=b,c=J({type:"keystatuseschange"}),a.dispatchEvent(c)}function ua(a){this.Kd=a,this.jd=0}function va(){this.size=0,this.wa=void 0}function wa(){Navigator.prototype.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(HTMLMediaElement.prototype.webkitGenerateKeyRequest?(Md=ba("FAKE_KEY_ID"),Navigator.prototype.requestMediaKeySystemAccess=la,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=ma,a.MediaKeys=oa,a.MediaKeySystemAccess=na):(Navigator.prototype.requestMediaKeySystemAccess=p,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=q,a.MediaKeys=r,a.MediaKeySystemAccess=s))}function xa(a){this.systemIds=[],this.cencKeyIds=[],a=new w(new DataView(a.buffer),0);try{for(;a.Pa();){var b=a.i,c=y(a),d=y(a);if(1==c?c=z(a):0==c&&(c=a.j.byteLength-b),1886614376!=d)B(a,c-(a.i-b));else{var e=x(a);if(e>1)B(a,c-(a.i-b));else{B(a,3);var f=ea(A(a)),g=[];if(e>0)for(var h=y(a),i=0;h>i;++i){var j=ea(A(a));g.push(j)}var k=y(a);B(a,k),this.cencKeyIds.push.apply(this.cencKeyIds,g),this.systemIds.push(f),a.i!=b+c&&B(a,c-(a.i-b))}}}}catch(l){}}function ya(a){var b;a instanceof ya?(za(this,a.Ja),this.cb=a.cb,this.ra=a.ra,Aa(this,a.tb),this.ja=a.ja,Ba(this,a.Va.clone()),this.Oa=a.Oa):a&&(b=String(a).match(Nd))?(za(this,b[1]||"",!0),this.cb=Ca(b[2]||""),this.ra=Ca(b[3]||"",!0),Aa(this,b[4]),this.ja=Ca(b[5]||"",!0),Ba(this,b[6]||"",!0),this.Oa=Ca(b[7]||"")):this.Va=new Fa(null)}function za(a,b,c){a.Ja=c?Ca(b,!0):b,a.Ja&&(a.Ja=a.Ja.replace(/:$/,""))}function Aa(a,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);a.tb=b}else a.tb=null}function Ba(a,b,c){b instanceof Fa?a.Va=b:(c||(b=Da(b,Rd)),a.Va=new Fa(b))}function Ca(a,b){return a?b?decodeURI(a):decodeURIComponent(a):""}function Da(a,b,c){return"string"==typeof a?(a=encodeURI(a).replace(b,Ea),c&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Ea(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(15&a).toString(16)}function Fa(a){this.Ea=a||null}function Ga(){this.id=this.url=null,this.type="static",this.ta=this.Vc=this.e=null,this.F=5,this.ab=this.pa=this.Ic=null,this.Rc=1,this.v=[]}function Ha(){this.o=this.A=this.H=this.e=this.duration=this.start=this.id=null,this.Aa=[]}function Ia(){this.o=this.A=this.H=this.e=this.Z=this.n=this.height=this.width=this.contentType=this.lang=this.id=null,this.qa=[],this.Y=[]}function Ja(){this.value=null}function Ka(){this.contentType=this.lang=this.id=null}function La(){this.o=this.A=this.H=this.e=this.Z=this.n=this.height=this.width=this.bandwidth=this.lang=this.id=null,this.qa=[],this.Gb=!1}function Ma(){this.value=this.schemeIdUri=null,this.children=[],this.pssh=null}function Na(){this.parsedPssh=this.psshBox=null}function Oa(){this.url=null}function Pa(){this.url=null}function Qa(){this.e=null,this.p=1,this.N=this.Xa=this.Ga=this.w=null}function Ra(){this.X=this.url=null}function Sa(){this.X=this.url=null}function Ta(){this.e=null,this.p=1,this.q=this.w=null,this.ga=1,this.N=null,this.Za=[]}function Ua(){this.nb=this.Lb=null}function Va(){this.p=1,this.q=this.w=null,this.ga=1,this.xa=this.ib=this.Ha=this.ob=null}function Wa(){this.qc=[]}function Xa(){this.repeat=this.duration=this.startTime=null}function Ya(a,b){this.Ab=a,this.end=b}function Za(a,b){var c=b?new ya(b):null;return a?c?a.resolve(c):a:c}function $a(a,b,c){var d=db(c);return(b=ab(b,c.constructor.TAG_NAME))&&d.parse(a,b),d}function _a(a,b,c){var d=null;return(b=ab(b,c.TAG_NAME))&&(d=new c,d.parse(a,b)),d}function ab(a,b){for(var c=null,d=0;d<a.childNodes.length;d++)if(a.childNodes[d].tagName==b){if(c)return null;c=a.childNodes[d]}return c}function bb(a,b,c){for(var d=[],e=0;e<b.childNodes.length;e++)if(b.childNodes[e].tagName==c.TAG_NAME){var f=new c;f.parse.call(f,a,b.childNodes[e]),d.push(f)}return d}function cb(a){return a=a.firstChild,a.nodeType!=Node.TEXT_NODE?null:a.nodeValue}function db(a){return a?a.clone():null}function eb(a,b,c,d){return a=c(a.getAttribute(b)),null!=a?a:void 0!==d?d:null}function fb(a){return a?(a=Date.parse(a),isNaN(a)?null:Math.floor(a/1e3)):null}function gb(b){if(!b)return null;var c=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(b);if(!c)return null;b=0;var d=jb(c[1]);return d&&(b+=31536e3*d),(d=jb(c[2]))&&(b+=2592e3*d),(d=jb(c[3]))&&(b+=86400*d),(d=jb(c[4]))&&(b+=3600*d),(d=jb(c[5]))&&(b+=60*d),c=a.parseFloat(c[6]),(c=isNaN(c)?null:c)&&(b+=c),b}function hb(a){var b=/([0-9]+)-([0-9]+)/.exec(a);return b?(a=jb(b[1]),null==a?null:(b=jb(b[2]),null==b?null:new Ya(a,b))):null}function ib(b){return b=a.parseInt(b,10),b>0?b:null}function jb(b){return b=a.parseInt(b,10),b>=0?b:null}function kb(a){return a}function lb(a,b,c){for(var d=a.o,e=[],f=0;c>f;++f){var g=f+b,h=(g-1)*d.q,i=h/d.p,h=(h+d.q)/d.p,g=mb(a,g-1+d.ga,(g-1)*d.q);if(!g)return null;e.push(new ob(i,h,0,null,new ya(g)))}return e}function mb(a,b,c){if(!a.o)return null;var d=a.o.ob;return d?(b=nb(d,a.id,b,a.bandwidth,c))?a.e?a.e.resolve(b):b:null:a.e?new ya(a.e):null}function nb(b,c,d,e,f){var g={RepresentationID:c,Number:d,Bandwidth:e,Time:f};b=b.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)d)?\$/g,function(b,c,d){if("$$"==b)return"$";var e=g[c];return null==e?b:("RepresentationID"==c&&d&&(d=void 0),b=e.toString(),d=a.parseInt(d,10)||1,d=Math.max(0,d-b.length),Array(d+1).join("0")+b)});try{return new ya(b)}catch(h){if(h instanceof URIError)return null;throw h}}function ob(a,b,c,d,e){this.startTime=a,this.endTime=b,this.$a=c,this.Eb=d,this.url=e}function pb(a,b,c){return new ob(b,c,a.$a,a.Eb,a.url)}function qb(a,b){for(var c=a.length-1;c>=0;--c){var d=a[c];if(b>=d.startTime&&(null==d.endTime||b<d.endTime))return c}return-1}function rb(a,b){return a.map(function(a){return pb(a,a.startTime+b,null!=a.endTime?a.endTime+b:null)})}function sb(){}function tb(a){this.g=a,this.na=0}function ub(a){if(0==a.g.length)throw new RangeError("SegmentIndex: There is no last SegmentReference.");return a.g[a.g.length-1]}function vb(a,b){if(a.na!=b.na&&(b=new tb(rb(b.g,a.na-b.na))),0==a.length())a.g=b.g.slice(0);else if(0!=b.length()&&null!=ub(a).endTime&&!(null!=ub(b).endTime&&ub(b).endTime<ub(a).endTime)){if(ub(a).endTime<=b.first().startTime)var c=pb(ub(a),ub(a).startTime,b.first().startTime),c=a.g.slice(0,-1).concat([c]);else{var d;for(d=0;d<a.g.length&&!(a.g[d].endTime>=b.first().startTime);++d);a.g[d].startTime<b.first().startTime?(c=pb(a.g[d],a.g[d].startTime,b.first().startTime),c=a.g.slice(0,d).concat([c])):(a.first().startTime>b.first().startTime||b.first(),c=a.g.slice(0,d))}a.g=c.concat(b.g)}}function wb(a,b,c,d){tb.call(this,a),this.Sa=b,this.zd=c,this.Hb=d,this.ka=this.sb=this.R=null,xb(this)}function xb(a){if(0!=a.length()){a.length();var b=null!=ub(a).endTime?ub(a).endTime:ub(a).startTime;if(a.Sa.pa>a.Hb)a.R=b;else{var c=a.Hb-(a.Sa.pa+a.zd.start);0>c?a.R=b:c<Math.max(ub(a).startTime,ub(a).endTime||0)?(ub(a),a.R=b):a.R=c}a.sb=ub(a).startTime,a.ka=a.first().startTime}}function yb(a,b){if(zb(a,b),null==a.R||null==a.sb||null==a.ka)return{start:0,end:0};var c=b-a.Hb,d=a.R+c;return null!=a.Sa.ab&&(d=d-a.ka-a.Sa.ab,d>0&&(a.ka+=d)),c=a.sb+c,c=0<a.length()?null!=ub(a).endTime?Math.min(c,ub(a).endTime):c:a.ka,c=Math.max(c,a.ka),{start:a.ka,end:c}}function zb(a,b){if(null!=a.Sa.ab)if(null==a.R)a.length();else{for(var c=a.R+(b-a.Hb),d=0,e=0;e<a.g.length;++e){var f=null;if(e<a.g.length-1?f=a.g[e+1].endTime:(f=a.g[e],f=null!=f.endTime?f.endTime+(f.endTime-f.startTime):null),!(null!=f&&f<c-a.Sa.ab))break;++d}d>0&&a.g.splice(0,d)}}function Ab(a,b,c,d){var e,f=1,g=0;if(a.pa>d)e=null;else{var h=a.Rc||0,i=a.ab||0;e=c.o,e=e.q/e.p;var j=d-(a.pa+b.start);0>j?e=null:(i=j-2*e-i,0>i&&(i=0),i=Math.ceil(i/e)*e,j-=e,0>j?e=null:(h=Math.floor(j/e)*e-h,0>h&&(h=0),h=Math.floor(h/e)*e,e={cd:i/e+1,current:(h>=i?h:i)/e+1}))}if(e&&(f=e.cd,g=e.current-e.cd+1),f=lb(c,f,g),null==f)throw a=Error("Failed to generate SegmentReferences."),a.type="stream",a;wb.call(this,f,a,b,d),this.G=c,this.rb=this.V=0<this.length()?a.pa+b.start+ub(this).endTime:null,this.qb=e?e.current+1:null}function Bb(a,b){if(null!=a.V&&null!=a.rb&&null!=a.qb){var c=a.G.o,c=c.q/c.p,d=Math.floor((a.rb+(b-a.Hb)-a.V)/c);if(0!=d){var e=lb(a.G,a.qb,d);Array.prototype.push.apply(a.g,rb(e,a.na)),a.V+=d*c,a.qb+=d}}}function Cb(a,b,c,d){this.Q=a,this.da=b,this.G=c,this.Ib=d,this.b=null}function Db(a,b,c){this.Q=a,this.da=b,this.G=c,this.b=null}function Eb(a,b,c,d){this.Q=a,this.da=b,this.G=c,this.Ib=d,this.b=null}function Fb(a){this.Ue=a,this.b=null}function Gb(){}function Hb(a){this.url=a,this.h=new Ib,this.Pb=this.Hd=this.wc=0,this.m=null,this.B=new X,this.L=null}function Ib(){this.body=null,this.Jb=1,this.$c=1e3,this.Ie=2,this.Je=.5,this.gc=0,this.method="GET",this.responseType="arraybuffer",this.fc={},this.Id=this.withCredentials=!1}function Jb(a){Kb(a),a.h.body=null,a.B=null,a.L=null}function Kb(a){a.m&&(a.m.onload=null,a.m.onreadystatechange=null,a.m.onerror=null,a.m.ontimeout=null),a.m=null}function Lb(a){var b=a.url.split("/"),c=parseInt(b[2],10),d=parseInt(b[3],10),e=new fd(null,null);return gd(e).then(function(){return nd(e,c,d)}).then(_(a,function(a){var b=JSON.parse(JSON.stringify(new XMLHttpRequest));return b.response=a,a=this.B,a.resolve(b),hd(e),Jb(this),a}))["catch"](_(a,function(a){return hd(e),Jb(this),Promise.reject(a)}))}function Mb(a,b,c){return b=Error(b),b.type=c,b.status=a.m.status,b.url=a.url,b.method=a.h.method,b.body=a.h.body,b.Ye=a.m,b}function Nb(b){Kb(b),a.setTimeout(b.mc.bind(b),b.Pb*(1+(2*Math.random()-1)*b.h.Je)),b.Pb*=b.h.Ie}function Ob(a){Hb.call(this,a),this.h.responseType="text",this.h.Jb=3,this.h.gc=Td,this.h.Id=!0}function Pb(a,b,c,d){Hb.call(this,a),this.h.body=b,this.h.method="POST",this.h.Jb=3,this.h.withCredentials=c,this.h.gc=Ud,a=d||{};for(var e in a)this.h.fc[e]=a[e]}function Qb(a,b,c,d,e){Hb.call(this,a),(b||c)&&(this.h.fc.Range="bytes="+(b+"-"+(null!=c?c:""))),d&&(this.h.Jb=d),e&&(this.h.$c=e),this.h.gc=Vd}function Rb(a,b,c){this.url=a,this.$a=b,this.Eb=c,this.ub=this.Ya=null}function Sb(a){a.Ya&&(a.Ya.abort(),a.Ya=null,a.ub=null)}function Tb(a,b,c,d,e,f){this.Q=a,this.da=b,this.Yb=c,this.hb=d,this.cc=e,this.Ib=f,this.b=this.B=null}function Ub(a){this.Mb=a}function Vb(a,b,c){this.qd=a,this.va=b,this.P=c,this.l=new Q,this.ba=[],this.ya=0,this.Ta=this.C=null,R(this.l,this.va,"updateend",this.te.bind(this))}function Wb(a,b){for(var c=a.va.buffered,d=0;d<c.length;++d){var e=c.start(d)-Wd,f=c.end(d)+Wd;if(b>=e&&f>=b)return c.end(d)-b}return 0}function Xb(a){return a.C.start(),a.C.Tc.then(function(){this.C=null}.bind(a))["catch"](function(a){return this.C=null,Promise.reject(a)}.bind(a))}function Yb(a,b){try{a.va.appendBuffer(b)}catch(c){return Promise.reject(c)}return a.Ta=new X,a.Ta}function Zb(){this.K=Xd++,this.id=this.I=this.O=null,this.timestampOffset=0,this.height=this.width=this.bandwidth=null,this.Z=this.n="",this.enabled=!0}function $b(a){var b=a.n||"";return a.Z&&(b+='; codecs="'+a.Z+'"'),b}function _b(){this.K=Yd++,this.id=null,this.contentType="",this.f=[],this.Ma=[],this.lang="",this.Gb=!1}function ac(){this.id=null,this.start=0,this.duration=null,this.u=[]}function bc(){this.ia=!1,this.Ub=this.yb=null,this.F=0,this.t=[]}function cc(){this.id=0,this.$=null,this.Fa=this.contentType=""}function dc(a){this.kb=a}function ec(a){if(a.v.length){null==a.v[0].start&&(a.v[0].start=0);var b=function(a){return 0==a||!!a};"dynamic"==a.type&&(a.ta=null),b(a.ta)&&1==a.v.length&&!b(a.v[0].duration)&&(a.v[0].duration=a.ta);for(var c=0,d=!0,e=0;e<a.v.length;++e){var f=a.v[e-1],g=a.v[e],h=a.v[e+1]||{start:a.ta};!b(g.start)&&f&&b(f.start)&&b(f.duration)&&(g.start=f.start+f.duration),!b(g.duration)&&b(h.start)&&(g.duration=h.start-g.start),null!=g.start&&null!=g.duration?c+=g.duration:d=!1}b(a.ta)||(e=a.v[a.v.length-1],d?a.ta=c:b(e.start)&&b(e.duration)?a.ta=e.start+e.duration:"dynamic"!=a.type&&(a.ta=c))}}function fc(a,b,c){return(b=nb(b,a.id,null,a.bandwidth,null))?(c=new c,c.url=a.e&&b?a.e.resolve(b):b,c):null}function gc(a){var b=new ya(a.url),c=0,d=null;return a.X&&(c=a.X.Ab,d=a.X.end),new Rb(b,c,d)}function hc(a,b,c){U.call(this,a),this.a=b,this.c=c,this.D=this.mb=null,this.l=new Q,this.Nb={},this.wb=[],this.ud=0,this.eb=new X,this.Xc=null}function ic(a){for(var b=new O,c=a.c.dd(),d=0;d<c.length;++d){var e=c[d];e.$.keySystem||e.Fa&&!Ac(e.Fa)||b.push(e.contentType,e)}for(var d={},e=!1,f=0;f<c.length;++f){var g=c[f];if(g.$.keySystem&&!b.has(g.contentType)){var h=g.$.keySystem,i=d[h];i||(i=g.$,i={audioCapabilities:void 0,videoCapabilities:void 0,initDataTypes:void 0,distinctiveIdentifier:i.Rd?"required":"optional",persistentState:i.Fe||a.c.ec()?"required":"optional"},d[h]=i),g.Fa&&(h=g.contentType+"Capabilities",h in i&&(e=!0,i[h]||(i[h]=[]),i[h].push({contentType:g.Fa,robustness:g.$[g.contentType+"Robustness"]})))}}if(!e){if(!c.length)throw a=Error("No DRM scheme info provided!"),a.type="drm",a;a.D=c[0].$}return 0==Object.keys(d).length?(a.c.Pc(b),a.eb.resolve(),Promise.resolve()):(e=new X,d=kc(d,e),d=d.then(a.Od.bind(a,c,b)),d=d.then(a.Se.bind(a)),e.reject(null),d)}function jc(b,c){return null==b.Xc&&(b.Xc=a.setTimeout(function(){var a=Error("Timeout waiting for sessions.");a.type="storage",this.eb.reject(a)}.bind(b),c)),b.eb}function kc(a,b){for(var c in a){var d=a[c];b=b["catch"](function(){return navigator.requestMediaKeySystemAccess(c,[d])})}return b}function lc(a){for(var b=a.c.ac(),c=0;c<b.length;++c){var d=mc(a),e=d.load(b[c]);a.wb.push(d),e["catch"](_(a,function(a){a=K(a),this.dispatchEvent(a)}))}}function mc(a){var b=a.c.ec()?a.mb.createSession("persistent-license"):a.mb.createSession();return R(a.l,b,"message",a.re.bind(a)),R(a.l,b,"keystatuseschange",a.le.bind(a)),b}function nc(a,b,c,d){d=new ha(d),c.od&&c.od(d),new Pb(c.de,d.body,c.withCredentials,d.headers).send().then(_(a,function(a){return c.nd&&(a=c.nd(a)),b.update(a)})).then(_(a,function(){var a=J({type:"sessionReady",detail:b});this.dispatchEvent(a),this.ud++,this.ud>=this.wb.length&&this.eb.resolve()}))["catch"](_(a,function(a){a.$e=b,a=K(a),this.dispatchEvent(a)}))}function oc(a,b,c,d,e){U.call(this,a),this.a=b,this.ea=new Vb(c,d,e),this.P=e,this.kd=this.b=this.S=null,this.rd=0,this.Sc=!1,this.ha=null,this.Ob=!1,this.ya=null,this.Jc=this.$b=this.la=!1}function pc(a,b){a.S&&!a.Ob&&(a.Ob=!0,a.Xb(),a.ea.abort().then(_(a,function(){var a=this.a.currentTime;return!b&&0<Wb(this.ea,a)&&0<=qb(this.ea.ba,a)?Promise.resolve():(this.Jc=!0,this.ea.clear())})).then(_(a,function(){this.Ob=!1,this.fa(0)}))["catch"](_(a,function(a){this.Ob=!1,a=K(a),this.dispatchEvent(a)})))}function qc(a,b,c){a=a.ea;var d=a.ba.length;return a=d>0?a.ba[d-1]:null,null!=a?null!=a.endTime?c.find(a.endTime):null:c.find(b)}function rc(a){if(!a.la&&null!=a.ya){a.la=!0,a.ea.Ba(a.ya);var b=J({type:"started",bubbles:!1,na:a.ya});a.dispatchEvent(b)}}function sc(a){var b=J({type:"ended"});a.dispatchEvent(b)}function tc(a,b){U.call(this,a),this.a=b,this.Db=!0,this.oa=this.b=this.S=null}function uc(){this.streamStats=null,this.droppedFrames=this.decodedFrames=NaN,this.bufferingTime=this.playTime=this.estimatedBandwidth=0,this.playbackLatency=NaN,this.bufferingHistory=[],this.bandwidthHistory=[],this.streamHistory=[]}function vc(a){a.playTime+=g("playing")/1e3}function wc(a,b){var c=new xc(b);a.streamHistory.push(new yc(c)),(c.videoHeight||!a.streamStats)&&(a.streamStats=c)}function xc(a){this.videoWidth=a.width,this.videoHeight=a.height,this.videoMimeType=a.n,this.videoBandwidth=a.bandwidth}function yc(a){this.timestamp=v()/1e3,this.value=a}function zc(a){U.call(this,null),this.a=a,this.c=null,this.l=new Q,this.Na=null,this.sa="en",this.tc=this.ic=null,this.gb=!1,this.J=new uc,this.vc=!0,this.Ad=1,this.hc=new ia}function Ac(b){return"text/vtt"==b?!!a.VTTCue:MediaSource.isTypeSupported(b)}function Bc(b){b.ic&&(a.clearTimeout(b.ic),b.ic=null)}function Cc(b){Dc(b),b.tc=a.setTimeout(b.Ae.bind(b),100)}function Dc(b){b.tc&&(a.clearTimeout(b.tc),b.tc=null)}function Ec(a){f("buffering");var b=a.J;b.bufferingTime+=g("buffering")/1e3,a.gb=!1,a.dispatchEvent(J({type:"bufferingEnd"}))}function Fc(){}function Gc(a,b){var c=a.bandwidth||Number.MAX_VALUE,d=b.bandwidth||Number.MAX_VALUE;return d>c?-1:c>d?1:0}function Hc(a){this.ua=a}function Ic(a){function b(a,b){return a.concat(b)}var c=a.t.map(function(a){return a.u}).reduce(b,[]).map(function(a){return a.f}).reduce(b,[]);return a=c.map(function(a){return a.O.create()}),Promise.all(a).then(function(a){for(var b={},d=0;d<c.length;++d)b[c[d].K]=a[d];return Promise.resolve(b)})}function Jc(a,b,c,d,e){var f=new O;a.t.forEach(function(a,b){f.push(a.id||""+b,a)});var g=new O;for(b.t.forEach(function(a,b){g.push(a.id||""+b,a)}),a=f.keys(),b=0;b<a.length;++b){var h=a[b],i=f.get(h);1<i.length||(h=g.get(h))&&0!=h.length&&1==h.length&&(Kc(i[0],h[0],c,d,e),i[0].duration=h[0].duration)}}function Kc(a,b,c,d,e){var f=new O;a.u.forEach(function(a,b){f.push(a.id||""+b,a)});var g=new O;for(b.u.forEach(function(a,b){g.push(a.id||""+b,a)}),a=f.keys(),b=0;b<a.length;++b){var h=a[b],i=f.get(h);1<i.length||(h=g.get(h))&&0!=h.length&&1==h.length&&Lc(i[0],h[0],c,d,e)}}function Lc(a,b,c,d,e){var f=new O;a.f.forEach(function(a,b){f.push(a.id||""+b,a)});var g=new O;b.f.forEach(function(a,b){g.push(a.id||""+b,a)}),b={};for(var h=f.keys(),i=0;i<h.length;++i){var j=h[i];b[j]=j;var k=f.get(j);1<k.length||((j=g.get(j))&&0!=j.length?1==j.length&&(Mc(k[0],j[0],c,d),
k[0].I=j[0].I,j[0].I=null,k[0].timestampOffset=j[0].timestampOffset):(e.push(k[0]),a.f.splice(a.f.indexOf(k[0]),1)))}for(h=g.keys(),i=0;i<h.length;++i)j=h[i],b[j]||(b[j]=j,j=g.get(j),a.f.push(j[0]))}function Mc(a,b,c,d){a=c[a.K],b=d[b.K],a.length(),a.Ec(b)&&a.length()}function Nc(){this.c=this.P=null,this.l=new Q,this.pb=Number.POSITIVE_INFINITY,this.Db=!0}function Oc(a){var b=a.c.getVideoTracks();if(0==b.length)return null;b.sort(k);var c;a:{c=a.c.getAudioTracks();for(var d=0;d<c.length;++d)if(c[d].active){c=c[d];break a}c=null}c=c?c.bandwidth:0,a=a.P.getBandwidth();for(var d=b[0],e=0;e<b.length;++e){var f=b[e],g=e+1<b.length?b[e+1]:{bandwidth:Number.POSITIVE_INFINITY};if(f.bandwidth&&(g=(g.bandwidth+c)/.85,a>=(f.bandwidth+c)/.95&&g>=a&&(d=f,d.active)))break}return d}function Pc(a,b,c){U.call(this,null),this.ee=a,this.Jd=b,this.D=c?c:ja(),this.ma=null}function Qc(a,b,c){U.call(this,null),this.d=a,this.L=b,this.M=new Q,this.W=new MediaSource,this.video=null,this.r=new O,this.zb=c,this.lb=!1,this.sa="",this.pc=!1,this.J=null,this.Vb=new X,this.Wb=null,this.yd=1,this.s={},this.sd=Number.POSITIVE_INFINITY,this.Kb=Number.NEGATIVE_INFINITY,this.Hc=0,this.ad=!1,this.Da={},this.Qb=this.ha=null}function Rc(a,b){var c=b.n.split("/")[0],d=a.s[c];if(d&&d.S==b){var e=a.r.get(b.n.split("/")[0]),f=e.map(function(a){return a.f}).reduce(function(a,b){return a.concat(b)},[]).filter(function(a){return a.enabled});if(0==f.length)return void e.push(b);a.Da[c].Qc==b&&delete a.Da[c],d.Tb(f[0],a.d.F,!0),b.destroy()}b.destroy()}function Sc(a,b,c,d){if(!a.r.has(b)||!a.s[b])return!1;for(var e=a.r.get(b),f=0;f<e.length;++f)for(var g=e[f],h=0;h<g.f.length;++h){var i=g.f[h];if(i.K==c)return"text"==b||a.ad?(wc(a.J,i),a.s[b].Tb(i,a.d.F,d),!0):(c=a.Da[b],a.Da[b]={Qc:i,bd:null!=c&&c.bd||d},!0)}return!1}function Tc(a,b){for(var c=0;2>=c;++c)for(var d=0;d<b.length;++d){var e=b[d];if(L(c,a.sa,e.lang))return b.splice(d,1),void b.splice(0,0,e)}for(d=0;d<b.length;++d)if(e=b[d],e.Gb){b.splice(d,1),b.splice(0,0,e);break}}function Uc(a){for(var b=[],c=["audio","video","text"],d=0;d<c.length;++d){var e=c[d];a.r.has(e)&&b.push(a.r.get(e)[0])}a.zb.start(a.L,a);var f=Vc(a,b),b=N(f).map(function(a){return a.O.create()});return Promise.all(b).then(_(a,function(a){return a.every(function(a){return a.length()})&&(a=cd(this,a))?Wc(this,f)?(Yc(this,f,a),Promise.resolve()):(a=Error("Failed to create Stream objects."),a.type="stream",Promise.reject(a)):(a=Error("Some streams are not available."),a.type="stream",Promise.reject(a))}))["catch"](_(a,function(a){return"aborted"!=a.type?(Object.keys(this.s),this.d.ia?(this.fa(0),Promise.resolve()):Promise.reject(a)):void 0}))}function Vc(a,b){for(var c={},d=0;d<b.length;++d){var e=b[d],f=e.f[0];if("video"==e.contentType)for(var g=a.zb.getInitialVideoTrackId(),h=0;h<e.f.length&&(f=e.f[h],f.K!=g);++h);else"audio"==e.contentType&&(f=e.f[Math.floor(e.f.length/2)]);c[e.contentType]=f}return c}function Wc(a,b){var c,d={};for(c in b){var e=b[c],e="text"==c?new tc(a,a.video):Xc(a,e);if(!e)return N(d).forEach(function(a){a.destroy()}),!1;d[c]=e}return a.s=d,!0}function Xc(a,b){var c;try{c=a.W.addSourceBuffer($b(b))}catch(d){return null}try{c.timestampOffset=b.timestampOffset}catch(e){return null}return new oc(a,a.video,a.W,c,a.L)}function Yc(a,b,c){a.yd=a.video.playbackRate,a.video.playbackRate=0;var d;a.d.ia?(a.W.duration=c.end+2592e3,d=c.end):(a.W.duration=c.end-c.start,d=c.start),a.video.currentTime=d,_c(a,c.start,c.end);for(var e in a.s)c=a.s[e],R(a.M,c,"started",a.ve.bind(a)),R(a.M,c,"ended",a.ue.bind(a)),d=b[e],wc(a.J,d),c.Tb(d,a.d.F,!1);a.Cb(a.pc)}function Zc(a){for(var b=bd(a),c=0;c<b.length;++c)b[c].Ba(a.Kb);$c(a,b),b=P(a.r).map(function(a){return a.f}).reduce(function(a,b){return a.concat(b)},[]).map(function(a){var b=[a.O.create()];return a.I&&b.push(a.I.create()),Promise.all(b)}),Promise.all(b).then(_(a,function(a){for(var b=0;b<a.length;++b)a[b][0].Ba(this.Kb);this.ad=!0;for(var c in this.Da)a=this.Da[c],b=this.s[c],wc(this.J,a.Qc),b.Tb(a.Qc,this.d.F,a.bd);this.Da={}}))["catch"](_(a,function(a){"aborted"!=a.type&&(a=K(a),this.dispatchEvent(a))}))}function $c(a,b){var c=cd(a,b);c&&_c(a,c.start,c.end);var d=a.video.currentTime+a.Kb;a.video.currentTime=d,a.d.ia&&(a.Hc=c.end-d),a.video.playbackRate=a.yd,R(a.M,a.video,"playing",function(){var a=this.video;this.M.bb(a,"playing"),R(this.M,a,"playing",this.Mc.bind(this))}.bind(a)),R(a.M,a.video,"seeking",function(){var a=this.video;this.M.bb(a,"seeking"),R(this.M,a,"seeking",this.qe.bind(this))}.bind(a)),null!=a.d.yb&&a.fa(a.Hc),dd(a)}function _c(a,b,c){b=J({type:"seekrangechanged",bubbles:!0,start:b,end:c}),a.dispatchEvent(b)}function ad(a){var b=cd(a,bd(a));if(!b)return!1;var c=a.video.currentTime;return c>=b.start-.01&&c<=b.end+.01?!1:(b=c<b.start?Math.min(b.start+(a.d.ia?a.d.F:0),b.end):b.end,a.video.currentTime=b,!0)}function bd(a){return N(a.s).map(function(a){return a.b}).filter(function(a){return null!=a})}function cd(a,b){for(var c=0,d=Number.POSITIVE_INFINITY,e=0;e<b.length;++e){var f=b[e].Dc(),c=Math.max(c,f.start);null!=f.end&&(d=Math.min(d,f.end))}if(d==Number.POSITIVE_INFINITY){if(d=a.d.t[0],!d.duration)return null;d=(d.start||0)+d.duration}return a.d.ia&&(d=Math.max(d-(a.d.F+a.Hc),c)),c>d?null:{start:c,end:d}}function dd(b){b.d.ia&&(b.Qb=a.setTimeout(b.ye.bind(b),1e3))}function ed(a,b,c,d){c||(c=new W),d||(d=new Nc),Qc.call(this,null,c,d),this.ie=a,this.kb=b}function fd(a,b){U.call(this,b),this.Ca=null,this.P=a}function gd(b){if(!a.indexedDB)return Promise.reject(Error("Offline storage requires IndexedDB support."));var c=new X,d=a.indexedDB.open("content_database",1);return d.onupgradeneeded=_(b,function(a){this.Ca=a.target.result,id(this,"group_store",{keyPath:"group_id"}),id(this,"stream_index_store",{keyPath:"stream_id"}),a=id(this,"content_store",{autoIncrement:"true"}),a.createIndex("segment",["stream_id","segment_id"],{unique:!0}),a.createIndex("stream","stream_id",{unique:!1})}),d.onsuccess=_(b,function(a){this.Ca=a.target.result,c.resolve()}),d.onerror=function(){c.reject(d.error)},c}function hd(a){a.Ca&&a.Ca.close()}function id(a,b,c){return a.Ca.objectStoreNames.contains(b)&&a.Ca.deleteObjectStore(b),a.Ca.createObjectStore(b,c)}function jd(a,b,c,d,e){for(var f=[],g=[],h=0,i=0,j=[],k=b.map(function(a){return a.O.create()}),k=Promise.all(k),l=b.map(function(a){return a.I.create()}),l=Promise.all(l),k=Promise.all([k,l]).then(function(a){f=a[0],g=a[1],h=f.reduce(function(a,b){return a+b.length()},0)}),l=0;l<b.length;++l)k=k.then(function(a){return kd(this,b[a],f[a],g[a],h,i)}.bind(a,l)),k=k.then(function(a,b){i+=f[a].length(),j.push(b)}.bind(a,l));return k.then(_(a,function(){return ld(vd(this))})).then(_(a,function(a){var b=new X,f={group_id:a,stream_ids:j,session_ids:c,duration:d,key_system:e.keySystem},g=vd(this).put(f);return g.onsuccess=function(){b.resolve(a)},g.onerror=function(){b.reject(g.error)},b}))}function kd(a,b,c,d,e,f){var g=[ld(ud(a)),ld(td(a).index("stream"))],g=Promise.all(g).then(_(a,function(a){return{Sb:Math.max(a[0],a[1]),vb:new ArrayBuffer(0),Oc:0,g:[],Ac:null,We:e,Bd:f}})),g=g.then(a.ae.bind(a,c));return g=g.then(a.be.bind(a,b,d))}function ld(a){var b=new X,c=a.openCursor(null,"prev");return c.onsuccess=function(a){a.target.result?b.resolve(a.target.result.key+1):b.resolve(0)},c.onerror=function(){b.reject(c.error)},b}function md(a,b){var c=new Uint8Array(a.byteLength+b.byteLength);return c.set(new Uint8Array(a),0),c.set(new Uint8Array(b),a.byteLength),c.buffer}function nd(a,b,c){return rd(td(a).index("segment"),[b,c]).then(function(a){return Promise.resolve(a.content)})}function od(a,b){return rd(ud(a),b)}function pd(a,b){return rd(vd(a),b).then(function(a){return a.hasOwnProperty("duration")||a.hasOwnProperty("key_system")?Promise.resolve(a):od(this,a.af[0]).then(function(b){return a.duration=b.duration,a.ce=b.ce,Promise.resolve(a)})}.bind(a))}function qd(a){var b=new X,c=[],d=vd(a).openCursor();return d.onerror=function(){b.reject(d.error)},d.onsuccess=function(a){(a=a.target.result)?(c.push(a.key),a["continue"]()):b.resolve(c)},b}function rd(a,b){var c=new X,d=a.get(b);return d.onerror=function(){c.reject(d.error)},d.onsuccess=function(){if(d.result)c.resolve(d.result);else{var a=Error("Item not found.");a.type="storage",c.reject(a)}},c}function sd(a,b){var c=new X,d=ud(a)["delete"](b);d.onerror=function(){c.reject(d.error)};var e=td(a);return e.index("stream").openKeyCursor(IDBKeyRange.only(b)).onsuccess=function(a){(a=a.target.result)&&(e["delete"](a.primaryKey),a["continue"]())},e.transaction.oncomplete=function(){c.resolve()},c}function td(a){return wd(a,"content_store")}function ud(a){return wd(a,"stream_index_store")}function vd(a){return wd(a,"group_store")}function wd(a,b){return a.Ca.transaction([b],"readwrite").objectStore(b)}function xd(a){this.jc=a,this.b=null}function yd(a,b,c){b||(b=new W),c||(c=new Nc),Qc.call(this,null,b,c),this.fd=a,this.nc=[],this.timeoutMs=3e4}function zd(a,b,c,d){var e=new fd(a.L,a),f=gd(e);return f=f.then(_(a,function(){return jd(e,b,this.nc,d,c)})).then(function(a){return hd(e),Promise.resolve(a)})["catch"](function(a){return hd(e),Promise.reject(a)})}var Ad,Bd=this;d("error"),d("warn"),d("info"),d("log"),d("debug");var Cd=a.performance&&a.performance.now?a.performance.now.bind(a.performance):Date.now,Dd={};b("shaka.player.AudioTrack.compare",function(a,b){return a.lang<b.lang?-1:a.lang>b.lang?1:a.bandwidth<b.bandwidth?-1:a.bandwidth>b.bandwidth?1:0}),b("shaka.player.TextTrack.compare",function(a,b){return a.lang<b.lang?-1:a.lang>b.lang?1:0}),b("shaka.player.VideoTrack.compare",k),b("shaka.polyfill.CustomEvent.install",l),b("shaka.polyfill.Fullscreen.install",n),r.prototype.createSession=function(){},r.prototype.setServerCertificate=function(){},s.prototype.getConfiguration=function(){},s.prototype.createMediaKeys=function(){},b("shaka.polyfill.VideoPlaybackQuality.install",t);var Ed=0,Fd=1;w.prototype.Pa=function(){return this.i<this.j.byteLength};var Gd;C.prototype.Pa=function(){return this.Wa.Pa()},H.prototype.sample=function(a,b){var c=Math.pow(this.Yc,a);this.yc=b*(1-c)+c*this.yc,this.rc+=a};var Hd=1,Id=2,Jd={aar:"aa",abk:"ab",afr:"af",aka:"ak",alb:"sq",amh:"am",ara:"ar",arg:"an",arm:"hy",asm:"as",ava:"av",ave:"ae",aym:"ay",aze:"az",bak:"ba",bam:"bm",baq:"eu",bel:"be",ben:"bn",bih:"bh",bis:"bi",bod:"bo",bos:"bs",bre:"br",bul:"bg",bur:"my",cat:"ca",ces:"cs",cha:"ch",che:"ce",chi:"zh",chu:"cu",chv:"cv",cor:"kw",cos:"co",cre:"cr",cym:"cy",cze:"cs",dan:"da",deu:"de",div:"dv",dut:"nl",dzo:"dz",ell:"el",eng:"en",epo:"eo",est:"et",eus:"eu",ewe:"ee",fao:"fo",fas:"fa",fij:"fj",fin:"fi",fra:"fr",fre:"fr",fry:"fy",ful:"ff",geo:"ka",ger:"de",gla:"gd",gle:"ga",glg:"gl",glv:"gv",gre:"el",grn:"gn",guj:"gu",hat:"ht",hau:"ha",heb:"he",her:"hz",hin:"hi",hmo:"ho",hrv:"hr",hun:"hu",hye:"hy",ibo:"ig",ice:"is",ido:"io",iii:"ii",iku:"iu",ile:"ie",ina:"ia",ind:"id",ipk:"ik",isl:"is",ita:"it",jav:"jv",jpn:"ja",kal:"kl",kan:"kn",kas:"ks",kat:"ka",kau:"kr",kaz:"kk",khm:"km",kik:"ki",kin:"rw",kir:"ky",kom:"kv",kon:"kg",kor:"ko",kua:"kj",kur:"ku",lao:"lo",lat:"la",lav:"lv",lim:"li",lin:"ln",lit:"lt",ltz:"lb",lub:"lu",lug:"lg",mac:"mk",mah:"mh",mal:"ml",mao:"mi",mar:"mr",may:"ms",mkd:"mk",mlg:"mg",mlt:"mt",mon:"mn",mri:"mi",msa:"ms",mya:"my",nau:"na",nav:"nv",nbl:"nr",nde:"nd",ndo:"ng",nep:"ne",nld:"nl",nno:"nn",nob:"nb",nor:"no",nya:"ny",oci:"oc",oji:"oj",ori:"or",orm:"om",oss:"os",pan:"pa",per:"fa",pli:"pi",pol:"pl",por:"pt",pus:"ps",que:"qu",roh:"rm",ron:"ro",rum:"ro",run:"rn",rus:"ru",sag:"sg",san:"sa",sin:"si",slk:"sk",slo:"sk",slv:"sl",sme:"se",smo:"sm",sna:"sn",snd:"sd",som:"so",sot:"st",spa:"es",sqi:"sq",srd:"sc",srp:"sr",ssw:"ss",sun:"su",swa:"sw",swe:"sv",tah:"ty",tam:"ta",tat:"tt",tel:"te",tgk:"tg",tgl:"tl",tha:"th",tib:"bo",tir:"ti",ton:"to",tsn:"tn",tso:"ts",tuk:"tk",tur:"tr",twi:"tw",uig:"ug",ukr:"uk",urd:"ur",uzb:"uz",ven:"ve",vie:"vi",vol:"vo",wel:"cy",wln:"wa",wol:"wo",xho:"xh",yid:"yi",yor:"yo",zha:"za",zho:"zh",zul:"zu"};Ad=O.prototype,Ad.push=function(a,b){this.ca.hasOwnProperty(a)?this.ca[a].push(b):this.ca[a]=[b]},Ad.set=function(a,b){this.ca[a]=b},Ad.has=function(a){return this.ca.hasOwnProperty(a)},Ad.get=function(a){return(a=this.ca[a])?a.slice():null},Ad.remove=function(a,b){var c=this.ca[a];if(c)for(var d=0;d<c.length;++d)c[d]==b&&(c.splice(d,1),--d)},Ad.keys=function(){var a,b=[];for(a in this.ca)b.push(a);return b},Ad.clear=function(){this.ca={}},Q.prototype.destroy=function(){S(this),this.fb=null},Q.prototype.bb=function(a,b){for(var c=this.fb.get(b)||[],d=0;d<c.length;++d){var e=c[d];e.target==a&&(e.bb(),this.fb.remove(b,e))}},T.prototype.bb=function(){this.target&&(this.target.removeEventListener(this.type,this.pd,!1),this.pd=this.target=null)},b("shaka.util.FakeEventTarget",U),U.prototype.addEventListener=function(a,b,c){c||this.Fc.push(a,b)},U.prototype.removeEventListener=function(a,b,c){c||this.Fc.remove(a,b)},U.prototype.dispatchEvent=function(a){return delete a.srcElement,delete a.target,delete a.currentTarget,Object.defineProperties(a,{srcElement:{value:null,writable:!0},target:{value:this,writable:!0},currentTarget:{value:null,writable:!0}}),V(this,a)},c(W,U),b("shaka.util.EWMABandwidthEstimator",W),W.prototype.sample=function(a,b){if(!(b<this.fe)){a=Math.max(a,this.ge);var c=8e3*b/a,d=a/1e3;this.zc.sample(d,c),this.Gd.sample(d,c),this.dispatchEvent(J({type:"bandwidth"})),this.md=Date.now()}},W.prototype.getBandwidth=function(){return this.zc.rc<this.he?this.Qd:Math.min(I(this.zc),I(this.Gd))},W.prototype.getDataAge=function(){return(Date.now()-this.md)/1e3},W.prototype.supportsCaching=function(){return!1},Y.prototype.append=function(a){if(this.la)throw Error("Cannot append to a running task!");this.Ka.push(a)},Y.prototype.start=function(){if(this.la)throw Error("Task already started!");this.la=!0,this.Ka.unshift(function(){}),Z(this,void 0)},Y.prototype.abort=function(){return this.za?this.za:this.la?(this.La&&this.La(),this.za=new X):(this.la=!0,Promise.resolve())},Y.prototype.end=function(){this.Ka.splice(1)},b("shaka.util.Uint8ArrayUtils.toString",aa),b("shaka.util.Uint8ArrayUtils.fromString",ba),b("shaka.util.Uint8ArrayUtils.toBase64",ca),b("shaka.util.Uint8ArrayUtils.fromBase64",da),b("shaka.util.Uint8ArrayUtils.fromHex",function(b){for(var c=new Uint8Array(b.length/2),d=0;d<b.length;d+=2)c[d/2]=a.parseInt(b.substr(d,2),16);return c}),b("shaka.util.Uint8ArrayUtils.toHex",ea),b("shaka.player.DrmSchemeInfo",ga);var Kd=1;ga.DistinctiveIdentifier={Ld:0,Md:Kd};var Ld=1;ga.PersistentState={Ld:0,Md:Ld},ia.prototype.clone=function(){var a=new ia;return a.maxHeight=this.maxHeight,a.maxWidth=this.maxWidth,a.maxBandwidth=this.maxBandwidth,a.minBandwidth=this.minBandwidth,a},ga.createUnencrypted=ja,ga.combine=ka,ga.prototype.key=function(){return JSON.stringify(this)},na.prototype.createMediaKeys=function(){var a=new oa(this.jb);return Promise.resolve(a)},na.prototype.getConfiguration=function(){return this.Pd},Ad=oa.prototype,Ad.createSession=function(a){var b=a||"temporary";if("temporary"!=b&&"persistent-license"!=b)throw new TypeError("Session type "+a+" is unsupported on this platform.");return a=this.Ia||document.createElement("video"),a.src||(a.src="about:blank"),b=new ra(a,this.Ra,b),this.td.push(b),b},Ad.setServerCertificate=function(){return Promise.reject(Error("setServerCertificate not supported on this platform."))},Ad.Ee=function(a){a=J({type:"encrypted",initDataType:"webm",initData:a.initData}),this.Ia.dispatchEvent(a)},Ad.De=function(a){var b=qa(this,a.sessionId);b&&(a=J({type:"message",messageType:void 0==b.keyStatuses.wa?"licenserequest":"licenserenewal",message:a.message}),b.aa&&(b.aa.resolve(),b.aa=null),b.dispatchEvent(a))},Ad.Be=function(a){(a=qa(this,a.sessionId))&&a.ready()},Ad.Ce=function(a){var b=qa(this,a.sessionId);b&&b.handleError(a)},c(ra,U),Ad=ra.prototype,Ad.ready=function(){ta(this,"usable"),this.T&&this.T.resolve(),this.T=null},Ad.handleError=function(a){var b=Error("EME v0.1b key error");b.errorCode=a.errorCode,b.errorCode.systemCode=a.systemCode,!a.sessionId&&this.aa?(b.method="generateRequest",45==a.systemCode&&(b.message="Unsupported session type."),this.aa.reject(b),this.aa=null):a.sessionId&&this.T?(b.method="update",this.T.reject(b),this.T=null):(b=a.systemCode,a.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?ta(this,"output-not-allowed"):1==b?ta(this,"expired"):ta(this,"internal-error"))},Ad.Wc=function(a,b){if(this.T)this.T.then(this.Wc.bind(this,a,b))["catch"](this.Wc.bind(this,a,b));else{this.T=a;var c,d;"webkit-org.w3.clearkey"==this.Ra?(c=aa(new Uint8Array(b)),d=JSON.parse(c),c=d.keys[0].kty,("A128KW"!=d.keys[0].alg||"oct"!=c)&&(this.T.reject(Error("Response is not a valid JSON Web Key Set.")),this.T=null),c=da(d.keys[0].k),d=da(d.keys[0].kid)):(c=new Uint8Array(b),d=null);try{this.Ia.webkitAddKey(this.Ra,c,d,this.sessionId)}catch(e){this.T.reject(e),this.T=null}}},Ad.generateRequest=function(a,b){return sa(this,b,null)},Ad.load=function(a){return"persistent-license"==this.sc?sa(this,null,a):Promise.reject(Error("Not a persistent session."))},Ad.update=function(a){var b=new X;return this.Wc(b,a),b},Ad.close=function(){if("persistent-license"!=this.sc){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;this.Ia.webkitCancelKeyRequest(this.Ra,this.sessionId)}return this.closed.resolve(),this.closed},Ad.remove=function(){return"persistent-license"!=this.sc?Promise.reject(Error("Not a persistent session.")):this.close()},ua.prototype.next=function(){return this.jd>=this.Kd.length?{value:void 0,done:!0}:{value:this.Kd[this.jd++],done:!1}};var Md;Ad=va.prototype,Ad.forEach=function(a){this.wa&&a(this.wa)},Ad.get=function(a){return this.has(a)?this.wa:void 0},Ad.has=function(a){var b=Md;return this.wa&&fa(new Uint8Array(a),b)?!0:!1},Ad.keys=function(){var a=Md,b=[];return this.wa&&b.push(a),new ua(b)},Ad.values=function(){var a=[];return this.wa&&a.push(this.wa),new ua(a)},b("shaka.polyfill.MediaKeys.install",wa),b("shaka.polyfill.installAll",function(){l(),n(),wa(),t()});var Nd=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;Ad=ya.prototype,Ad.Ja="",Ad.cb="",Ad.ra="",Ad.tb=null,Ad.ja="",Ad.Oa="",Ad.toString=function(){var a=[],b=this.Ja;if(b&&a.push(Da(b,Od,!0),":"),b=this.ra){a.push("//");var c=this.cb;c&&a.push(Da(c,Od,!0),"@"),a.push(encodeURIComponent(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.tb,null!=b&&a.push(":",String(b))}return(b=this.ja)&&(this.ra&&"/"!=b.charAt(0)&&a.push("/"),a.push(Da(b,"/"==b.charAt(0)?Qd:Pd,!0))),(b=this.Va.toString())&&a.push("?",b),(b=this.Oa)&&a.push("#",Da(b,Sd)),a.join("")},Ad.resolve=function(a){var b=this.clone(),c=!!a.Ja;c?za(b,a.Ja):c=!!a.cb,c?b.cb=a.cb:c=!!a.ra,c?b.ra=a.ra:c=null!=a.tb;var d=a.ja;if(c)Aa(b,a.tb);else if(c=!!a.ja){if("/"!=d.charAt(0))if(this.ra&&!this.ja)d="/"+d;else{var e=b.ja.lastIndexOf("/");-1!=e&&(d=b.ja.substr(0,e+1)+d)}if(".."==d||"."==d)d="";else if(-1!=d.indexOf("./")||-1!=d.indexOf("/.")){for(var e=0==d.lastIndexOf("/",0),d=d.split("/"),f=[],g=0;g<d.length;){var h=d[g++];"."==h?e&&g==d.length&&f.push(""):".."==h?((1<f.length||1==f.length&&""!=f[0])&&f.pop(),e&&g==d.length&&f.push("")):(f.push(h),e=!0)}d=f.join("/")}}return c?b.ja=d:c=""!==a.Va.toString(),c?Ba(b,a.Va.clone()):c=!!a.Oa,c&&(b.Oa=a.Oa),b},Ad.clone=function(){return new ya(this)};var Od=/[#\/\?@]/g,Pd=/[\#\?:]/g,Qd=/[\#\?]/g,Rd=/[\#\?@]/g,Sd=/#/g;Ad=Fa.prototype,Ad.U=null,Ad.Zb=null,Ad.add=function(a,b){if(!this.U&&(this.U={},this.Zb=0,this.Ea))for(var c=this.Ea.split("&"),d=0;d<c.length;d++){var e=c[d].indexOf("="),f=null,g=null;e>=0?(f=c[d].substring(0,e),g=c[d].substring(e+1)):f=c[d],f=decodeURIComponent(f.replace(/\+/g," ")),g=g||"",this.add(f,decodeURIComponent(g.replace(/\+/g," ")))}return this.Ea=null,(c=this.U.hasOwnProperty(a)&&this.U[a])||(this.U[a]=c=[]),c.push(b),this.Zb++,this},Ad.toString=function(){if(this.Ea)return this.Ea;if(!this.U)return"";var a,b=[];for(a in this.U)for(var c=encodeURIComponent(a),d=this.U[a],e=0;e<d.length;e++){var f=c;""!==d[e]&&(f+="="+encodeURIComponent(d[e])),b.push(f)}return this.Ea=b.join("&")},Ad.clone=function(){var a=new Fa;if(a.Ea=this.Ea,this.U){var b,c={};for(b in this.U)c[b]=this.U[b].concat();a.U=c,a.Zb=this.Zb}return a},Qa.prototype.clone=function(){var a=new Qa;return a.e=this.e?new ya(this.e):null,a.p=this.p,a.w=this.w,a.Ga=db(this.Ga),a.Xa=db(this.Xa),a.N=db(this.N),a},Ra.prototype.clone=function(){var a=new Ra;return a.url=this.url?new ya(this.url):null,a.X=db(this.X),a},Sa.prototype.clone=function(){var a=new Sa;return a.url=this.url?new ya(this.url):null,a.X=db(this.X),a},Ta.prototype.clone=function(){var a=new Ta;return a.e=this.e?new ya(this.e):null,a.p=this.p,a.w=this.w,a.q=this.q,a.ga=this.ga,a.N=db(this.N),a.Za=this.Za.map(function(a){return a.clone()}),a},Ua.prototype.clone=function(){var a=new Ua;return a.Lb=this.Lb?new ya(this.Lb):null,a.nb=db(this.nb),a},Va.prototype.clone=function(){var a=new Va;return a.p=this.p,a.w=this.w,a.q=this.q,a.ga=this.ga,a.ob=this.ob,a.Ha=this.Ha,a.ib=this.ib,a.xa=db(this.xa),a},Wa.prototype.clone=function(){var a=new Wa;return a.qc=this.qc.map(function(a){return a.clone()}),a},Xa.prototype.clone=function(){var a=new Xa;return a.startTime=this.startTime,a.duration=this.duration,a.repeat=this.repeat,a},Ya.prototype.clone=function(){return new Ya(this.Ab,this.end)},Ga.TAG_NAME="MPD",Ha.TAG_NAME="Period",Ia.TAG_NAME="AdaptationSet",Ja.TAG_NAME="Role",Ka.TAG_NAME="ContentComponent",La.TAG_NAME="Representation",Ma.TAG_NAME="ContentProtection",Na.TAG_NAME="cenc:pssh",Oa.TAG_NAME="BaseURL",Pa.TAG_NAME="Location",Qa.TAG_NAME="SegmentBase",Ra.TAG_NAME="RepresentationIndex",Sa.TAG_NAME="Initialization",Ta.TAG_NAME="SegmentList",Ua.TAG_NAME="SegmentURL",Va.TAG_NAME="SegmentTemplate",Wa.TAG_NAME="SegmentTimeline",Xa.TAG_NAME="S",Ga.prototype.parse=function(a,b){this.url=new ya(a.e),this.id=eb(b,"id",kb),this.type=eb(b,"type",kb)||"static",this.ta=eb(b,"mediaPresentationDuration",gb),this.F=eb(b,"minBufferTime",gb,this.F),this.Ic=eb(b,"minimumUpdatePeriod",gb,this.Ic),this.pa=eb(b,"availabilityStartTime",fb,this.pa),this.ab=eb(b,"timeShiftBufferDepth",gb,this.ab),this.Rc=eb(b,"suggestedPresentationDelay",gb,this.Rc);var c=_a(this,b,Oa);this.e=Za(a.e,c?c.url:null),(c=_a(this,b,Pa))&&(this.Vc=Za(a.e,c.url)),this.v=bb(this,b,Ha)},Ha.prototype.parse=function(a,b){this.id=eb(b,"id",kb),this.start=eb(b,"start",gb),this.duration=eb(b,"duration",gb);var c=_a(this,b,Oa);this.e=Za(a.e,c?c.url:null),this.H=_a(this,b,Qa),this.A=_a(this,b,Ta),this.o=_a(this,b,Va),this.Aa=bb(this,b,Ia)},Ia.prototype.parse=function(a,b){var c=_a(this,b,Ka)||{},d=_a(this,b,Ja);this.id=eb(b,"id",kb),this.lang=eb(b,"lang",kb,c.lang),this.contentType=eb(b,"contentType",kb,c.contentType),this.width=eb(b,"width",ib),this.height=eb(b,"height",ib),this.n=eb(b,"mimeType",kb),this.Z=eb(b,"codecs",kb),this.Gb=d&&"main"==d.value,this.lang&&(this.lang=M(this.lang)),c=_a(this,b,Oa),this.e=Za(a.e,c?c.url:null),this.qa=bb(this,b,Ma),!this.contentType&&this.n&&(this.contentType=this.n.split("/")[0]),this.H=a.H?$a(this,b,a.H):_a(this,b,Qa),this.A=a.A?$a(this,b,a.A):_a(this,b,Ta),this.o=a.o?$a(this,b,a.o):_a(this,b,Va),this.Y=bb(this,b,La),!this.n&&this.Y.length&&(this.n=this.Y[0].n,!this.contentType&&this.n&&(this.contentType=this.n.split("/")[0]))},Ja.prototype.parse=function(a,b){this.value=eb(b,"value",kb)},Ka.prototype.parse=function(a,b){this.id=eb(b,"id",kb),this.lang=eb(b,"lang",kb),this.contentType=eb(b,"contentType",kb),this.lang&&(this.lang=M(this.lang))},La.prototype.parse=function(a,b){this.id=eb(b,"id",kb),this.bandwidth=eb(b,"bandwidth",ib),this.width=eb(b,"width",ib,a.width),this.height=eb(b,"height",ib,a.height),this.n=eb(b,"mimeType",kb,a.n),this.Z=eb(b,"codecs",kb,a.Z),this.lang=a.lang;var c=_a(this,b,Oa);this.e=Za(a.e,c?c.url:null),this.qa=bb(this,b,Ma),this.H=a.H?$a(this,b,a.H):_a(this,b,Qa),this.A=a.A?$a(this,b,a.A):_a(this,b,Ta),this.o=a.o?$a(this,b,a.o):_a(this,b,Va),0==this.qa.length&&(this.qa=a.qa)},Ma.prototype.parse=function(a,b){this.schemeIdUri=eb(b,"schemeIdUri",kb),this.value=eb(b,"value",kb),this.pssh=_a(this,b,Na),this.children=Array.prototype.slice.call(b.childNodes)},Na.prototype.parse=function(a,b){var c=cb(b);if(c){this.psshBox=da(c);try{this.parsedPssh=new xa(this.psshBox)}catch(d){if(!(d instanceof RangeError))throw d}}},Oa.prototype.parse=function(a,b){this.url=cb(b)},Pa.prototype.parse=function(a,b){this.url=cb(b)},Qa.prototype.parse=function(a,b){this.e=a.e||this.e,this.p=eb(b,"timescale",ib,this.p),this.w=eb(b,"presentationTimeOffset",jb,this.w),this.Ga=eb(b,"indexRange",hb,this.Ga),this.Xa=_a(this,b,Ra)||this.Xa,this.N=_a(this,b,Sa)||this.N},Ra.prototype.parse=function(a,b){var c=eb(b,"sourceURL",kb);this.url=Za(a.e,c),this.X=eb(b,"range",hb,db(a.Ga))},Sa.prototype.parse=function(a,b){var c=eb(b,"sourceURL",kb);this.url=Za(a.e,c),this.X=eb(b,"range",hb)},Ta.prototype.parse=function(a,b){this.e=a.e||this.e,this.p=eb(b,"timescale",ib,this.p),this.w=eb(b,"presentationTimeOffset",jb,this.w),this.q=eb(b,"duration",ib,this.q),this.ga=eb(b,"startNumber",jb,this.ga),this.N=_a(this,b,Sa)||this.N,this.Za=bb(this,b,Ua)||this.Za},Ua.prototype.parse=function(a,b){var c=eb(b,"media",kb);this.Lb=Za(a.e,c),this.nb=eb(b,"mediaRange",hb)},Va.prototype.parse=function(a,b){this.p=eb(b,"timescale",ib,this.p),this.w=eb(b,"presentationTimeOffset",jb,this.w),this.q=eb(b,"duration",ib,this.q),this.ga=eb(b,"startNumber",jb,this.ga),this.ob=eb(b,"media",kb,this.ob),this.Ha=eb(b,"index",kb,this.Ha),this.ib=eb(b,"initialization",kb,this.ib),this.xa=_a(this,b,Wa)||this.xa},Wa.prototype.parse=function(a,b){this.qc=bb(this,b,Xa)},Xa.prototype.parse=function(a,b){this.startTime=eb(b,"t",jb),this.duration=eb(b,"d",jb),this.repeat=eb(b,"r",jb)},sb.prototype.parse=function(a,b,c){var d=null;try{d=this.Nc(a,b,c)}catch(e){if(!(e instanceof RangeError))throw e}return d},sb.prototype.Nc=function(a,b,c){var d=[];a=new w(a,0);var e=y(a);if(1936286840!=y(a))return null;1==e&&(e=z(a));var f=x(a);B(a,3),B(a,4);var g=y(a);if(0==g)return null;var h,i;for(0==f?(h=y(a),i=y(a)):(h=z(a),i=z(a)),B(a,2),f=a.j.getUint16(a.i,a.Gc),a.i+=2,b=b+e+i,e=0;f>e;e++){var j=y(a);i=(2147483648&j)>>>31;var j=2147483647&j,k=y(a);if(y(a),1==i)return null;d.push(new ob(h/g,(h+k)/g,b,b+j-1,c)),h+=k,b+=j}return d},tb.prototype.destroy=function(){this.g=null},Ad=tb.prototype,Ad.length=function(){return this.g.length},Ad.first=function(){if(0==this.g.length)throw new RangeError("SegmentIndex: There is no first SegmentReference.");return this.g[0]},Ad.get=function(a){if(0>a||a>=this.g.length)throw new RangeError("SegmentIndex: The specified index is out of range.");return this.g[a]},Ad.find=function(a){return a=qb(this.g,a),a>=0?this.g[a]:null},Ad.Ec=function(a){return vb(this,a),!0},Ad.Ba=function(a){var b=a-this.na;return 0==b?0:(this.g=rb(this.g,b),this.na=a,b)},Ad.Dc=function(){return 0<this.length()?{start:this.first().startTime,end:ub(this).endTime}:{start:0,end:0}},c(wb,tb),wb.prototype.destroy=function(){this.zd=this.Sa=null,tb.prototype.destroy.call(this)},wb.prototype.find=function(a){return zb(this,v()/1e3),tb.prototype.find.call(this,a)},wb.prototype.Ec=function(a){return vb(this,a),null==this.R&&xb(this),!0},wb.prototype.Ba=function(a){return a=tb.prototype.Ba.call(this,a),null!=this.R&&(this.sb+=a,this.ka+=a,this.sb>this.R&&(this.R+=a)),a},wb.prototype.Dc=function(){return yb(this,v()/1e3)},c(Ab,wb),Ab.prototype.destroy=function(){this.G=null,wb.prototype.destroy.call(this)},Ab.prototype.find=function(a){var b=v()/1e3;return Bb(this,b),zb(this,b),tb.prototype.find.call(this,a)},Ab.prototype.Ec=function(a){return null==this.V&&a instanceof Ab&&null!=a.V?(this.V=a.V,this.rb=a.rb,this.qb=a.qb,vb(this,a),Bb(this,v()/1e3),xb(this),!0):!1},Ab.prototype.Ba=function(a){return a=wb.prototype.Ba.call(this,a),null!=this.V&&(this.V+=a,this.rb+=a),a},Ab.prototype.Dc=function(){var a=v()/1e3;return Bb(this,a),yb(this,a)},Cb.prototype.destroy=function(){this.G=this.da=this.Q=null,this.b&&(this.b.destroy(),this.b=null)},Cb.prototype.create=function(){if(this.b)return Promise.resolve(this.b);if("dynamic"==this.Q.type)try{this.b=new Ab(this.Q,this.da,this.G,this.Ib)}catch(a){return Promise.reject(a)}else{var b=this.G.o,b=lb(this.G,1,Math.ceil(this.da.duration/(b.q/b.p)));if(!b)return b=Error("Failed to generate SegmentReferences"),b.type="stream",Promise.reject(b);this.b=new tb(b)}return Promise.resolve(this.b)},Db.prototype.destroy=function(){this.G=this.da=this.Q=null,this.b&&(this.b.destroy(),this.b=null)},Db.prototype.create=function(){if(this.b)return Promise.resolve(this.b);for(var a=this.G.A,b=0,c=[],d=0;d<a.Za.length;++d){var e=a.Za[d],b=0==d?0:b,f=null,g=null,h=b/a.p;a.q&&(f=b+a.q,g=f/a.p);var b=f,f=0,i=null;e.nb&&(f=e.nb.Ab,i=e.nb.end),c.push(new ob(h,g,f,i,new ya(e.Lb)))}return this.b=new tb(c),Promise.resolve(this.b)},Eb.prototype.destroy=function(){this.G=this.da=this.Q=null,this.b&&(this.b.destroy(),this.b=null)},Eb.prototype.create=function(){if(this.b)return Promise.resolve(this.b);for(var a=this.G.o,b=a.xa.qc,c=0,d=[],e=0;e<b.length&&b[e].duration;++e)for(var f=null!=b[e].startTime?b[e].startTime:c,g=b[e].repeat||0,h=0;g>=h;++h){var i=f+b[e].duration;0<d.length&&f!=c&&(d[d.length-1].end=f),d.push({start:f,end:i}),c=f=i}for(b=[],c=0;c<d.length;++c){if(g=d[c].start,e=g/a.p,f=d[c].end/a.p,g=mb(this.G,c+a.ga,g),!g)return a=Error("Failed to generate media URL."),a.type="dash",Promise.reject(a);b.push(new ob(e,f,0,null,new ya(g)))}return this.b="dynamic"==this.Q.type?new wb(b,this.Q,this.da,this.Ib):new tb(b),Promise.resolve(this.b)},Fb.prototype.destroy=function(){this.b&&(this.b.destroy(),this.b=null)},Fb.prototype.create=function(){if(this.b)return Promise.resolve(this.b);var a=new ob(0,null,0,null,this.Ue);return this.b=new tb([a]),Promise.resolve(this.b)},Gb.prototype.parse=function(a,b,c){var d=null;try{d=this.Nc(a,b,c)}catch(e){if(!(e instanceof RangeError))throw e}return d},Gb.prototype.Nc=function(a,b,c){if(b=new C(b),440786851!=D(b).id)b=null;else{var d=D(b);if(408125543!=d.id)b=null;else{b=d.j.byteOffset;for(var d=new C(d.j),e=null;d.Pa();){var f=D(d);if(357149030==f.id){e=f;break}}if(e){for(d=new C(e.j),e=1e6;d.Pa();)if(f=D(d),2807729==f.id){e=G(f);break}d=e/1e9}else d=null;b=d?{Ke:b,Ve:d}:null}}if(!b)return null;if(e=D(new C(a)),475249515!=e.id)return null;a=b.Ke,b=b.Ve;for(var d=[],e=new C(e.j),g=f=-1;e.Pa();){var h=D(e);if(187==h.id){var i;if(i=new C(h.j),h=D(i),179!=h.id)i=null;else if(h=G(h),i=D(i),183!=i.id)i=null;else{i=new C(i.j);for(var j=0;i.Pa();){var k=D(i);if(241==k.id){j=G(k);break}}i={Xe:h,Ge:j}}i&&(h=b*i.Xe,i=a+i.Ge,f>=0&&d.push(new ob(f,h,g,i-1,c)),f=h,g=i)}}return f>=0&&d.push(new ob(f,null,g,null,c)),d},Ad=Hb.prototype,Ad.mc=function(){if(this.m)return this.B;if(0==this.url.lastIndexOf("data:",0)){var b=this.url.split(":")[1].split(";").pop().split(","),c=b.pop(),c="base64"==b.pop()?a.atob(c.replace(/-/g,"+").replace(/_/g,"/")):a.decodeURIComponent(c);return"arraybuffer"==this.h.responseType&&(c=ba(c).buffer),b=JSON.parse(JSON.stringify(new XMLHttpRequest)),b.response=c,b.responseText=c.toString(),c=this.B,c.resolve(b),Jb(this),c}if(0==this.url.lastIndexOf("idb:",0))return Lb(this);this.wc++,this.Hd=Date.now(),this.Pb||(this.Pb=this.h.$c),this.m=new XMLHttpRequest,b=this.url,this.L&&!this.L.supportsCaching()&&(b=new ya(b),b.Va.add("_",Date.now()),b=b.toString()),this.m.open(this.h.method,b,!0),this.m.responseType=this.h.responseType,this.m.timeout=this.h.gc,this.m.withCredentials=this.h.withCredentials,this.m.onload=this.me.bind(this),this.h.Id&&(this.m.onreadystatechange=this.pe.bind(this)),this.m.onerror=this.Lc.bind(this),this.m.ontimeout=this.we.bind(this);for(c in this.h.fc)this.m.setRequestHeader(c,this.h.fc[c]);return this.m.send(this.h.body),this.B},Ad.abort=function(){if(this.m&&this.m.readyState!=XMLHttpRequest.DONE){this.m.abort();var a=Mb(this,"Request aborted.","aborted");this.B.reject(a),Jb(this)}},Ad.me=function(a){
this.L&&this.L.sample(Date.now()-this.Hd,a.loaded),200<=this.m.status&&299>=this.m.status?(this.B.resolve(this.m),Jb(this)):this.wc<this.h.Jb?Nb(this):(a=Mb(this,"HTTP error.","net"),this.B.reject(a),Jb(this))},Ad.pe=function(){if(this.m.readyState==XMLHttpRequest.HEADERS_RECEIVED){var a=Date.parse(this.m.getResponseHeader("Date"));a&&(Ed=a-Date.now())}},Ad.Lc=function(){var a=Mb(this,"Network failure.","net");this.B.reject(a),Jb(this)},Ad.we=function(){if(this.wc<this.h.Jb)Nb(this);else{var a=Mb(this,"Request timmedout.","net");this.B.reject(a),Jb(this)}},c(Ob,Hb);var Td=0;Ob.prototype.send=function(){var a=this.url;return this.mc().then(function(b){if(b=b.responseText,b=(new DOMParser).parseFromString(b,"text/xml")){var c={e:new ya(a)};b=_a(c,b,Ga)}else b=null;return b?Promise.resolve(b):(b=Error("MPD parse failure."),b.type="mpd",Promise.reject(b))})},c(Pb,Hb);var Ud=0;Pb.prototype.send=function(){return this.mc().then(function(a){return Promise.resolve(new Uint8Array(a.response))})},c(Qb,Hb);var Vd=0;Qb.prototype.send=function(){return this.mc().then(_(this,function(a){return Promise.resolve(a.response)}))},Rb.prototype.Fb=function(){if(this.ub)return this.ub;this.Ya=new Qb(this.url.toString(),this.$a,this.Eb);var a=this.Ya.send().then(_(this,function(a){return this.Ya=null,Promise.resolve(a)}));return this.ub=a=a["catch"](_(this,function(a){return this.ub=this.Ya=null,Promise.reject(a)}))},Tb.prototype.destroy=function(){this.da=this.Q=null,Sb(this.hb),this.hb=null,this.cc&&(Sb(this.cc),this.cc=null),this.b&&(this.b.destroy(),this.b=null),this.B=null},Tb.prototype.create=function(){if(this.B)return this.B;var a=[this.hb.Fb()];return"webm"==this.Yb&&a.push(this.cc.Fb()),this.B=Promise.all(a).then(_(this,function(a){var b=a[0];a=a[1]||null;var c=null;return"mp4"==this.Yb?(c=new sb,c=c.parse(new DataView(b),this.hb.$a,this.hb.url)):"webm"==this.Yb&&(c=new Gb,c=c.parse(new DataView(b),new DataView(a),this.hb.url)),c?(b="dynamic"==this.Q.type?new wb(c,this.Q,this.da,this.Ib):new tb(c),Promise.resolve(b)):(b=Error("Failed to parse segment references from",this.Yb,"container."),b.type="stream",Promise.reject(b))}))},Ub.prototype.destroy=function(){this.Mb&&(Sb(this.Mb),this.Mb=null)},Ub.prototype.create=function(){return this.Mb?this.Mb.Fb():Promise.resolve(null)};var Wd=1/60;Vb.prototype.destroy=function(){this.abort(),this.ba=this.C=this.Ta=null,this.l.destroy(),this.qd=this.va=this.l=null},Ad=Vb.prototype,Ad.Fb=function(a,b){if(this.C){var c=Error("Cannot fetch: previous operation not complete.");return c.type="stream",Promise.reject(c)}this.C=new Y,b&&this.C.append(function(){return[Yb(this,b),this.uc.bind(this)]}.bind(this)),this.C.append(function(){var b=new Qb(a.url.toString(),a.$a,a.Eb,3,1e3*(a.endTime?a.endTime-a.startTime:1));return b.L=this.P,[b.send(),b.abort.bind(b)]}.bind(this)),this.C.append(function(a){return this.P.getBandwidth(),[Yb(this,a),this.uc.bind(this)]}.bind(this));var d=0==this.va.buffered.length&&0==this.ba.length,e=null;return this.C.append(function(){if(d){var b=a.startTime;e=this.va.buffered.start(0)-b}b=qb(this.ba,a.startTime),b>=0?this.ba.splice(b+1,0,a):this.ba.push(a)}.bind(this)),Xb(this).then(function(){return Promise.resolve(e)}.bind(this))},Ad.clear=function(){if(this.C){var a=Error("Cannot clear: previous operation not complete.");return a.type="stream",Promise.reject(a)}return this.C=new Y,this.C.append(function(){var a;a:if(0==this.va.buffered.length)a=Promise.resolve();else{try{this.va.remove(0,Number.POSITIVE_INFINITY)}catch(b){a=Promise.reject(b);break a}this.ba=[],a=this.Ta=new X}return[a,this.uc.bind(this)]}.bind(this)),Xb(this)},Ad.abort=function(){return this.C?this.C.abort():Promise.resolve()},Ad.Ba=function(a){var b=a-this.ya;0!=b&&(this.ba=rb(this.ba,b),this.ya=a)},Ad.uc=function(){"open"==this.qd.readyState&&this.va.abort()},Ad.te=function(){this.Ta.resolve(),this.Ta=null};var Xd=0;Zb.prototype.destroy=function(){this.O&&(this.O.destroy(),this.O=null),this.I&&(this.I.destroy(),this.I=null)};var Yd=0;_b.prototype.destroy=function(){for(var a=0;a<this.f.length;++a)this.f[a].destroy();this.Ma=this.f=null},_b.prototype.Bc=function(){for(var a=[],b=0;b<this.Ma.length;++b){var c=new cc;c.id=this.K,c.$=this.Ma[b],c.contentType=this.contentType,c.Fa=this.f.length?$b(this.f[0]):"",a.push(c)}return a},ac.prototype.Bc=function(){for(var a=[],b=0;b<this.u.length;++b)a.push.apply(a,this.u[b].Bc());return a},ac.prototype.destroy=function(){for(var a=0;a<this.u.length;++a)this.u[a].destroy();this.u=null},bc.prototype.destroy=function(){for(var a=0;a<this.t.length;++a)this.t[a].destroy();this.t=null},dc.prototype.Ua=function(a){for(var b=v()/1e3,c=0;c<a.v.length;++c)for(var d=a.v[c],e=0;e<d.Aa.length;++e){var f=d.Aa[e];if("text"!=f.contentType)for(var g=0;g<f.Y.length;++g){var h=f.Y[g],i=0,i=i+(h.H?1:0),i=i+(h.A?1:0),i=i+(h.o?1:0);0==i?(f.Y.splice(g,1),--g):1!=i&&(h.H?(h.A=null,h.o=null):h.A&&(h.o=null))}}for(ec(a),c=0;c<a.v.length;++c)for(d=a.v[c],e=0;e<d.Aa.length;++e){for(g=f=d.Aa[e],h=null,i=0;i<g.Y.length;++i){var j=g.Y[i].n||"";h?j!=h&&(g.Y.splice(i,1),--i):h=j}0==f.Y.length&&(d.Aa.splice(e,1),--e)}for("dynamic"==a.type&&null==a.pa&&(a.pa=b),c=new bc,"dynamic"==a.type&&(c.ia=!0,c.yb=a.Ic,c.Ub=new ya(a.Vc?a.Vc:a.url)),c.F=a.F||5,d=0;d<a.v.length&&(e=a.v[d],null!=e.start);++d){for(f=new ac,f.id=e.id,f.start=e.start||0,f.duration=e.duration,g=0;g<e.Aa.length;++g){for(h=e.Aa[g],i=new _b,i.id=h.id,i.Gb=h.Gb,i.contentType=h.contentType||"",i.lang=h.lang||"",j=0;j<h.Y.length;++j){var k=h.Y[j],l=i.Ma.slice(0),m=k,n=l,o=[];if(0==m.qa.length)o.push(ja());else if(this.kb)for(var p=0;p<m.qa.length;++p){var q=this.kb(m.qa[p]);q&&o.push(q)}if(0==n.length)Array.prototype.push.apply(n,o);else for(m=0;m<n.length;++m){for(p=!1,q=0;q<o.length;++q)if(n[m].key()==o[q].key()){p=!0;break}p||(n.splice(m,1),--m)}if(!(0==l.length&&0<i.Ma.length)){if(o=a,n=e,m=b,k.e){var p=null,q=1,r=0;if(k.H)p=k.n.split("/")[1],"mp4"!=p&&"webm"!=p?p=null:(q=k.H,("webm"!=p||q.N)&&(q.Ga||q.Xa&&q.Xa.X)?(r=q.Xa,r||(r=new Ra,r.url=new ya(k.e),r.X=q.Ga?q.Ga.clone():null),r=gc(r),q=q.N?gc(q.N):null,n=new Tb(o,n,p,r,q,m),o=new Ub(q),m=new Zb,m.O=n,m.I=o,p=m):p=null),q=k.H.p,r=k.H.w;else if(k.A)m=k.A,!m.q&&1<m.Za.length?p=null:(m=m.N?gc(m.N):null,n=new Db(o,n,k),o=new Ub(m),m=new Zb,m.O=n,m.I=o,p=m),q=k.A.p,r=k.A.w;else if(k.o){a:if(p=k.o,q=p,r=0,r+=q.Ha?1:0,r+=q.xa?1:0,r+=q.q?1:0,0==r?q=!1:(1!=r&&(q.Ha?(q.xa=null,q.q=null):q.xa&&(q.q=null)),q=!0),q){if(q=null,p.ib&&(q=(p=k.o.ib)?fc(k,p,Sa):null,!q)){p=null;break a}p=q?gc(q):null;var s=n,q=k,r=m,n=q.o;if(n.Ha)if(n=o,o=s,m=q,q=r,r=p,s=m.n.split("/")[1],"mp4"!=s&&"webm"!=s||"webm"==s&&!r||!mb(m,1,0))n=null;else{var t=void 0;(t=(t=m.o.Ha)?fc(m,t,Ra):null)?(m=gc(t),n=new Tb(n,o,s,m,r,q)):n=null}else n=n.ob?n.xa?new Eb(o,s,q,r):n.q?"dynamic"!=o.type&&null==s.duration?null:new Cb(o,s,q,r):void 0:null;n?(o=new Ub(p),m=new Zb,m.O=n,m.I=o,p=m):p=null}else p=null;q=k.o.p,r=k.o.w}else"text"==k.n.split("/")[0]&&(p=new Zb,p.O=new Fb(new ya(k.e)));p?(p.id=k.id,r&&(p.timestampOffset=-1*r/q),p.bandwidth=k.bandwidth,p.width=k.width,p.height=k.height,p.n=k.n||"",p.Z=k.Z||"",k=p):k=null}else k=null;k&&(i.f.push(k),i.Ma=l)}}f.u.push(i)}c.t.push(f)}return c},c(hc,U),hc.prototype.destroy=function(){this.parent=null;for(var a=0;a<this.wb.length;++a)this.wb[a].close()["catch"](function(){});this.wb=[],this.Nb=this.D=this.mb=null,this.l.destroy(),this.a=this.c=this.l=null},Ad=hc.prototype,Ad.Od=function(a,b,c){for(var d=c.keySystem,e=c.getConfiguration(),f=["audio","video"],g=0;g<f.length;++g){var h=f[g];if(!b.has(h)){var i=e[h+"Capabilities"];if(i&&i.length){for(var i=i[0],j=[],k=0;k<a.length;++k){var l=a[k];l.$.keySystem==d&&l.Fa==i.contentType&&(j.push(l),this.D?ka(this.D,l.$):this.D=l.$)}b.set(h,j)}}}return this.c.Pc(b),c.createMediaKeys()},Ad.Se=function(a){return this.mb=a,this.a.setMediaKeys(this.mb).then(_(this,function(){return this.D.Dd?this.mb.setServerCertificate(this.D.Dd):Promise.resolve()})).then(_(this,function(){if(0<this.c.ac().length)lc(this);else{for(var a=0;a<this.D.Qa.length;++a){var b=this.D.Qa[a];this.vd({type:"encrypted",initDataType:b.initDataType,initData:b.initData})}0==this.D.Qa.length&&R(this.l,this.a,"encrypted",this.vd.bind(this))}}))},Ad.vd=function(a){var b=new Uint8Array(a.initData),c=Array.prototype.join.apply(b);if(!this.Nb[c]){try{var d=mc(this)}catch(e){return d=K(e),this.dispatchEvent(d),void this.eb.reject(e)}a=d.generateRequest(a.initDataType,a.initData),this.Nb[c]=!0,a["catch"](_(this,function(a){if(this.Nb){this.Nb[c]=!1;var b=K(a);this.dispatchEvent(b),this.eb.reject(a)}})),this.wb.push(d)}},Ad.re=function(a){nc(this,a.target,this.D,a.message)},Ad.le=function(a){var b=a.target.keyStatuses.values();for(a=b.next();!a.done;a=b.next()){var c=Zd[a.value];c&&(c=Error(c),c.type=a.value,a=K(c),this.dispatchEvent(a))}};var Zd={"output-not-allowed":"The required output protection is not available.",expired:"A required key has expired and the content cannot be decrypted.","internal-error":"An unknown error has occurred in the CDM."};c(oc,U);var $d=15;oc.prototype.destroy=function(){this.Xb(),this.P=this.S=null,this.ea.destroy(),this.parent=this.a=this.ea=null},Ad=oc.prototype,Ad.hd=function(){return this.la},Ad.gd=function(){return this.$b},Ad.Tb=function(a,b,c){if(a!=this.S){var d=[a.O.create(),a.I.create()];Promise.all(d).then(_(this,function(d){var e=this.S;this.S=a,this.b=d[0],this.kd=d[1],this.rd=b,this.Sc=!0,this.Ob||(e?c&&pc(this,!0):this.fa(0))}))["catch"](_(this,function(a){"aborted"!=a.type&&(a=K(a),this.dispatchEvent(a))}))}},Ad.Cd=function(){return pc(this,!1)},Ad.oc=function(){},Ad.Cc=function(){return!0},Ad.ze=function(){this.ha=null;var a=this.S,b=this.b,c=this.a.currentTime,d=Wb(this.ea,c),e=this.la?$d:Math.min(this.rd,$d)+(this.ya||0);if(d>=e)rc(this),this.fa(1e3/(Math.abs(this.a.playbackRate)||1));else if(b=qc(this,c,b)){var f=this.Sc;this.ea.Fb(b,this.kd).then(_(this,function(b){this.$b=!1,null==this.ya&&(this.ya=b),f&&(this.Sc=!1,b=a.n.split("/")[0],b=J({type:"adaptation",bubbles:!0,contentType:b,size:"video"!=b?null:{width:a.width,height:a.height},bandwidth:a.bandwidth}),this.dispatchEvent(b)),this.Jc&&0<Wb(this.ea,c)&&(this.Jc=!1,this.a.currentTime+=.001),this.fa(0)}))["catch"](_(this,function(a){if("aborted"!=a.type){var b=K(a);this.dispatchEvent(b),b=[0,404,410],"net"==a.type&&-1!=b.indexOf(a.Ye.status)&&this.fa(5e3)}}))}else rc(this),this.$b||(this.$b=!0,sc(this)),this.fa(1e3)},Ad.fa=function(b){this.ha=a.setTimeout(this.ze.bind(this),b)},Ad.Xb=function(){null!=this.ha&&(a.clearTimeout(this.ha),this.ha=null)},c(tc,U),tc.prototype.destroy=function(){this.oa&&this.a.removeChild(this.oa),this.parent=this.a=this.S=this.b=this.oa=null},Ad=tc.prototype,Ad.hd=function(){return!0},Ad.gd=function(){return!0},Ad.Tb=function(a){a.O.create().then(_(this,function(b){if(this.a){if(this.S=a,this.b=b,0==b.length())return Promise.reject(Error("No subtitles URL available."));b=b.first().url.toString();var c=this.Cc();this.oa&&(this.oc(!1),this.a.removeChild(this.oa)),this.oa=document.createElement("track"),this.a.appendChild(this.oa),this.oa.src=b,this.oc(c)}}))},Ad.Cd=function(){},Ad.oc=function(a){this.Db=a,this.oa&&(this.oa.track.mode=a?"showing":"disabled")},Ad.Cc=function(){return this.Db},c(zc,U),b("shaka.player.Player",zc),zc.version="v1.4.0",zc.isBrowserSupported=function(){return!!(a.MediaSource&&a.MediaKeys&&a.navigator&&a.navigator.requestMediaKeySystemAccess&&a.MediaKeySystemAccess&&a.MediaKeySystemAccess.prototype.getConfiguration&&a.Promise&&HTMLVideoElement.prototype.getVideoPlaybackQuality&&Element.prototype.requestFullscreen&&document.exitFullscreen&&"fullscreenElement"in document&&a.Uint8Array)},zc.isTypeSupported=Ac,zc.prototype.destroy=function(){return this.Uc().then(_(this,function(){this.l.destroy(),this.a=this.l=null}))["catch"](function(){})},zc.prototype.destroy=zc.prototype.destroy,zc.prototype.Uc=function(){if(!this.c)return Promise.resolve();this.gb&&Ec(this),this.a.pause(),S(this.l),Dc(this),Bc(this),this.Na.destroy(),this.Na=null,this.a.src="";var a=this.a.setMediaKeys(null);return this.c&&(this.c.destroy(),this.c=null),this.gb=!1,this.J=new uc,a},zc.prototype.unload=zc.prototype.Uc,zc.prototype.load=function(a){var b=this.Uc();return this.a.autoplay&&(e("load"),R(this.l,this.a,"timeupdate",this.ke.bind(this))),a.Bb(this.vc),b.then(_(this,function(){return a.load(this.sa)})).then(_(this,function(){return this.c=a,this.c.xb(this.hc),this.Na=new hc(this,this.a,this.c),ic(this.Na)})).then(_(this,function(){return R(this.l,this.a,"error",this.Lc.bind(this)),R(this.l,this.a,"playing",this.Mc.bind(this)),R(this.l,this.a,"pause",this.oe.bind(this)),this.c.Zc(this,this.a)})).then(_(this,function(){Cc(this)}))["catch"](_(this,function(b){a.destroy(),this.c=null,this.Na&&(this.Na.destroy(),this.Na=null);var c=K(b);return this.dispatchEvent(c),Promise.reject(b)}))},zc.prototype.load=zc.prototype.load,Ad=zc.prototype,Ad.ke=function(){f("load"),this.J.playbackLatency=g("load")/1e3,this.l.bb(this.a,"timeupdate")},Ad.Lc=function(a){this.a.error&&(a=this.a.error.code,a!=MediaError.MEDIA_ERR_ABORTED&&(a=Error(_d[a]||"Unknown playback error."),a.type="playback",a=K(a),this.dispatchEvent(a)))},Ad.Mc=function(){e("playing"),this.gb&&Ec(this)},Ad.oe=function(){f("playing"),vc(this.J)},Ad.getStats=function(){this.a.paused||(f("playing"),vc(this.J),e("playing"));var a=this.J,b=this.a.getVideoPlaybackQuality();return b&&(a.decodedFrames=b.totalVideoFrames,a.droppedFrames=b.droppedVideoFrames),this.J},zc.prototype.getStats=zc.prototype.getStats,zc.prototype.Td=function(){var a=this.a.videoWidth,b=this.a.videoHeight;return a&&b?{width:a,height:b}:null},zc.prototype.getCurrentResolution=zc.prototype.Td,zc.prototype.getVideoTracks=function(){return this.c?this.c.getVideoTracks():[]},zc.prototype.getVideoTracks=zc.prototype.getVideoTracks,zc.prototype.getAudioTracks=function(){return this.c?this.c.getAudioTracks():[]},zc.prototype.getAudioTracks=zc.prototype.getAudioTracks,zc.prototype.bc=function(){return this.c?this.c.bc():[]},zc.prototype.getTextTracks=zc.prototype.bc,zc.prototype.Rb=function(a,b){return this.c?this.c.Rb(a,void 0==b?!0:b):!1},zc.prototype.selectVideoTrack=zc.prototype.Rb,zc.prototype.kc=function(a){return this.c?this.c.kc(a,!1):!1},zc.prototype.selectAudioTrack=zc.prototype.kc,zc.prototype.lc=function(a){return this.c?this.c.lc(a,!1):!1},zc.prototype.selectTextTrack=zc.prototype.lc,zc.prototype.Cb=function(a){this.c&&this.c.Cb(a)},zc.prototype.enableTextTrack=zc.prototype.Cb,zc.prototype.Bb=function(a){this.vc=a,this.c&&this.c.Bb(a)},zc.prototype.enableAdaptation=zc.prototype.Bb,zc.prototype.Sd=function(){return this.vc},zc.prototype.getAdaptationEnabled=zc.prototype.Sd,zc.prototype.Ud=function(){return this.a.currentTime},zc.prototype.getCurrentTime=zc.prototype.Ud,zc.prototype.Vd=function(){return this.a.duration},zc.prototype.getDuration=zc.prototype.Vd,zc.prototype.Wd=function(){return this.a.muted},zc.prototype.getMuted=zc.prototype.Wd,zc.prototype.$d=function(){return this.a.volume},zc.prototype.getVolume=zc.prototype.$d,zc.prototype.play=function(){this.Fd(1),this.a.play()},zc.prototype.play=zc.prototype.play,zc.prototype.pause=function(){this.a.pause()},zc.prototype.pause=zc.prototype.pause,zc.prototype.requestFullscreen=function(){this.a.requestFullscreen()},zc.prototype.requestFullscreen=zc.prototype.requestFullscreen,zc.prototype.seek=function(a){this.a.currentTime=a},zc.prototype.seek=zc.prototype.seek,zc.prototype.Qe=function(a){$d=0>a?0:a},zc.prototype.setStreamBufferSize=zc.prototype.Qe,zc.prototype.Zd=function(){return $d},zc.prototype.getStreamBufferSize=zc.prototype.Zd,zc.prototype.Le=function(a){Ud=a},zc.prototype.setLicenseRequestTimeout=zc.prototype.Le,zc.prototype.Me=function(a){Td=a},zc.prototype.setMpdRequestTimeout=zc.prototype.Me,zc.prototype.Pe=function(a){Vd=a},zc.prototype.setRangeRequestTimeout=zc.prototype.Pe,zc.prototype.Ne=function(a){this.a.muted=a},zc.prototype.setMuted=zc.prototype.Ne,zc.prototype.Re=function(a){this.a.volume=a},zc.prototype.setVolume=zc.prototype.Re,zc.prototype.Oe=function(a){this.sa=M(a)},zc.prototype.setPreferredLanguage=zc.prototype.Oe,zc.prototype.Fd=function(a){Bc(this),a>=0?this.a.playbackRate=a:(this.a.playbackRate=0,this.wd(this.a.currentTime,Date.now(),a)),this.Ad=a},zc.prototype.setPlaybackRate=zc.prototype.Fd,zc.prototype.Xd=function(){return this.Ad},zc.prototype.getPlaybackRate=zc.prototype.Xd,zc.prototype.xb=function(a){if(!(a instanceof ia))throw new TypeError("Argument must be a Restrictions instance.");this.hc=a.clone(),this.c&&this.c.xb(this.hc)},zc.prototype.setRestrictions=zc.prototype.xb,zc.prototype.Yd=function(){return this.hc.clone()},zc.prototype.getRestrictions=zc.prototype.Yd,zc.prototype.dc=function(){return this.c?this.c.dc():!1},zc.prototype.isLive=zc.prototype.dc,zc.prototype.wd=function(b,c,d){this.a.currentTime=b+(Date.now()-c)/1e3*d,this.ic=a.setTimeout(this.wd.bind(this,b,c,d),100)},zc.prototype.Ae=function(){if(Cc(this),!this.a.ended&&!this.a.seeking){var a=this.a.buffered,b=a.length?a.end(a.length-1):0,a=b-this.a.currentTime,b=b+.05;this.gb?a>this.c.ed()&&(Ec(this),this.a.play()):b<this.a.duration&&.1>a&&!this.a.paused&&(this.gb=!0,this.a.pause(),this.J.bufferingHistory.push(v()/1e3),e("buffering"),this.dispatchEvent(J({type:"bufferingStart"})))}};var _d={2:"A network failure occured while loading media content.",3:"The browser failed to decode the media content.",4:"The browser does not support the media content."};Fc.prototype.Ua=function(a){for(var b=0;b<a.length;++b)for(var c=a[b],d=0;d<c.u.length;++d){for(var e=c.u[d],f=e,g=0;g<f.f.length;++g)Ac($b(f.f[g]))||(f.f.splice(g,1),--g);0==e.f.length&&(c.u.splice(d,1),--d)}for(b=0;b<a.length;++b)for(c=a[b],d=0;d<c.u.length;++d)c.u[d].f.sort(Gc)},Hc.prototype.destroy=function(){this.ua.destroy(),this.ua=null},Hc.prototype.update=function(a){var b=Ic(a),c=Ic(this.ua);return Promise.all([b,c]).then(function(b){var c=b[0];b=b[1];var d=new Fc;d.Ua(this.ua.t),a.yb=this.ua.yb,a.Ub=this.ua.Ub?new ya(this.ua.Ub):null,a.F=this.ua.F;var e=[];return Jc(a,this.ua,c,b,e),d.Ua(a.t),Promise.resolve(e)}.bind(this))},b("shaka.media.SimpleAbrManager",Nc),Nc.prototype.destroy=function(){this.l.destroy(),this.c=this.P=this.l=null},Nc.prototype.start=function(a,b){this.P&&this.c||(this.P=a,this.c=b,this.pb=Date.now()+4e3,R(this.l,this.P,"bandwidth",this.Kc.bind(this)),R(this.l,this.c,"adaptation",this.je.bind(this)))},Nc.prototype.enable=function(a){this.Db=a},Nc.prototype.getInitialVideoTrackId=function(){if(!this.c||!this.P)return null;var a=Oc(this);return a?a.id:null},Nc.prototype.Kc=function(){if(this.Db&&!(Date.now()<this.pb)){var a=Oc(this);if(a){if(a.active)return void(this.pb=Date.now()+3e3);this.c.Rb(a.id,!1)}this.pb=Number.POSITIVE_INFINITY}},Nc.prototype.je=function(){this.pb==Number.POSITIVE_INFINITY&&(this.pb=Date.now()+3e4)},c(Pc,U),b("shaka.player.HttpVideoSource",Pc),Pc.prototype.destroy=function(){this.ma&&(this.ma.parentElement.removeChild(this.ma),this.ma=null),this.parent=this.D=null},Ad=Pc.prototype,Ad.Zc=function(a,b){this.parent=a;var c=b.mediaKeys;return b.src=this.ee,c=b.setMediaKeys(c),this.Jd&&(this.ma=document.createElement("track"),this.ma.src=this.Jd,b.appendChild(this.ma),this.ma.track.mode="showing"),c},Ad.load=function(){return Promise.resolve()},Ad.getVideoTracks=function(){return[]},Ad.getAudioTracks=function(){return[]},Ad.bc=function(){return[]},Ad.ed=function(){return 5},Ad.dd=function(){var a=new cc;return a.$=this.D,[a]},Ad.Pc=function(){},Ad.Rb=function(){return!1},Ad.kc=function(){return!1},Ad.lc=function(){return!1},Ad.Cb=function(a){this.ma&&(this.ma.track.mode=a?"showing":"disabled")},Ad.Bb=function(){},Ad.xb=function(){},Ad.ac=function(){return[]},Ad.ec=function(){return!1},Ad.dc=function(){return!1},c(Qc,U),b("shaka.player.StreamVideoSource",Qc),Qc.prototype.destroy=function(){this.Qb&&(a.clearTimeout(this.Qb),this.Qb=null),this.Xb(),this.Da=null,this.M.destroy(),this.M=null,N(this.s).forEach(function(a){a.destroy()}),this.r=this.s=null,this.d&&(this.d.destroy(),this.d=null),this.zb.destroy(),this.parent=this.Wb=this.Vb=this.J=this.video=this.W=this.L=this.zb=null},Ad=Qc.prototype,Ad.Zc=function(b,c){if(!this.lb){var d=Error("Cannot call attach() right now.");return d.type="stream",Promise.reject(d)}return this.parent=b,this.video=c,this.J=b.getStats(),R(this.M,this.W,"sourceopen",this.ne.bind(this)),R(this.M,this.L,"bandwidth",this.Kc.bind(this)),d=this.video.mediaKeys,this.video.src=a.URL.createObjectURL(this.W),d=this.video.setMediaKeys(d),Promise.all([this.Vb,d])},Ad.load=function(a){return this.lb?(a=Error("Cannot call load() right now."),a.type="stream",Promise.reject(a)):this.d&&0!=this.d.t.length?(this.sa=a,(new Fc).Ua(this.d.t),0==this.d.t.length||0==this.d.t[0].u.length?(a=Error("The manifest specifies content that cannot be displayed on this browser/platform."),a.type="stream",Promise.reject(a)):(this.lb=!0,Promise.resolve())):(a=Error("The manifest does not specify any content."),a.type="stream",Promise.reject(a))},Ad.xe=function(){var a=Date.now(),b=this.ha=null;this.xd(this.d.Ub).then(_(this,function(a){return b=new Hc(a),b.update(this.d)})).then(_(this,function(c){b.destroy(),b=null;for(var d=0;d<c.length;++d)Rc(this,c[d]);this.Wb&&this.xb(this.Wb),0==Object.keys(this.s).length?Uc(this):this.fa((Date.now()-a)/1e3)}))["catch"](_(this,function(a){b&&(b.destroy(),b=null),"aborted"!=a.type&&(a=K(a),this.dispatchEvent(a),this.d&&this.fa(0))}))},Ad.xd=function(){return Promise.reject("Cannot update manifest with this VideoSource implementation.")},Ad.getVideoTracks=function(){if(!this.r.has("video"))return[];for(var a=this.s.video,a=(a=a?a.S:null)?a.K:0,b=[],c=this.r.get("video"),d=0;d<c.length;++d)for(var e=c[d],f=0;f<e.f.length;++f){var g=e.f[f];if(g.enabled){var h=g.K,g=new j(h,g.bandwidth,g.width,g.height);h==a&&(g.active=!0),b.push(g)}}return b},Ad.getAudioTracks=function(){if(!this.r.has("audio"))return[];for(var a=this.s.audio,a=(a=a?a.S:null)?a.K:0,b=[],c=this.r.get("audio"),d=0;d<c.length;++d)for(var e=c[d],f=e.lang,g=0;g<e.f.length;++g){var i=e.f[g],j=i.K,i=new h(j,i.bandwidth,f);j==a&&(i.active=!0),b.push(i)}return b},Ad.bc=function(){if(!this.r.has("text"))return[];for(var a=this.s.text,b=a?a.S:null,b=b?b.K:0,c=[],d=this.r.get("text"),e=0;e<d.length;++e)for(var f=d[e],g=f.lang,h=0;h<f.f.length;++h){var j=f.f[h].K,k=new i(j,g);j==b&&(k.active=!0,k.enabled=a.Cc()),c.push(k)}return c},Ad.ed=function(){return this.d&&this.d.F||0},Ad.dd=function(){return this.lb?this.d.t[0].Bc():[]},Ad.Pc=function(a){if(this.lb){for(var b={},c=this.d.t[0],d=0;d<c.u.length;++d){var e=c.u[d];b[e.K]=e}for(this.r.clear(),c=a.keys(),d=0;d<c.length;++d){var e=c[d],f=a.get(e);if("video"==e){var g=f[0].id;this.r.push(e,b[g])}else if("audio"==e)for(var g=f[0].Fa.split(";")[0],h=0;h<f.length;++h){var i=f[h];i.Fa.split(";")[0]==g&&this.r.push(e,b[i.id])}else for(h=0;h<f.length;++h)g=f[h].id,this.r.push(e,b[g])}this.pc=!0,(a=this.r.get("audio"))&&(Tc(this,a),this.r.set("audio",a),a=a[0].lang||this.sa,L(2,this.sa,a)&&(this.pc=!1)),(a=this.r.get("text"))&&(Tc(this,a),this.r.set("text",a),a=a[0].lang||this.sa,L(2,this.sa,a)||(this.pc=!1))}},Ad.Rb=function(a,b){return Sc(this,"video",a,b)},Ad.kc=function(a,b){return Sc(this,"audio",a,b)},Ad.lc=function(a,b){return Sc(this,"text",a,b)},Ad.Cb=function(a){var b=this.s.text;b&&b.oc(a)},Ad.Bb=function(a){this.zb.enable(a)},Ad.xb=function(a){if(this.lb){this.Wb=a;for(var b=0;b<this.d.t.length;++b)for(var c=this.d.t[b],d=0;d<c.u.length;++d)for(var e=c.u[d],f=0;f<e.f.length;++f){var g=e.f[f];g.enabled=!0,a.maxWidth&&g.width>a.maxWidth&&(g.enabled=!1),a.maxHeight&&g.height>a.maxHeight&&(g.enabled=!1),a.maxBandwidth&&g.bandwidth>a.maxBandwidth&&(g.enabled=!1),a.minBandwidth&&g.bandwidth<a.minBandwidth&&(g.enabled=!1)}}},Ad.ac=function(){return[]},Ad.ec=function(){return!1},Ad.dc=function(){return this.d?this.d.ia:!1},Ad.ne=function(){this.M.bb(this.W,"sourceopen"),Uc(this).then(_(this,function(){this.Vb.resolve()}))["catch"](_(this,function(a){this.Vb.reject(a)}))},Ad.ve=function(a){this.sd=Math.min(this.sd,a.na),this.Kb=Math.max(this.Kb,a.na);for(var b in this.s)if(!this.s[b].hd())return;Zc(this)},Ad.ye=function(){this.Qb=null;var a=cd(this,bd(this));a&&_c(this,a.start,a.end),dd(this)},Ad.Mc=function(){ad(this)},Ad.qe=function(){if(!ad(this))for(var a in this.s)this.s[a].Cd()},Ad.ue=function(){if(!this.d.ia){for(var a in this.s)if(!this.s[a].gd())return;"open"==this.W.readyState&&this.W.endOfStream()}},Ad.Kc=function(){var a=this.J,b=this.L.getBandwidth();a.estimatedBandwidth=b,a.bandwidthHistory.push(new yc(b))},Ad.fa=function(b){if(null!=this.d.yb){var c=Math.max(this.d.yb,3);b=Math.max(c-b,0),this.ha=a.setTimeout(this.xe.bind(this),1e3*b)}},Ad.Xb=function(){this.ha&&(a.clearTimeout(this.ha),this.ha=null)},c(ed,Qc),b("shaka.player.DashVideoSource",ed),ed.prototype.destroy=function(){this.kb=null,Qc.prototype.destroy.call(this)},ed.prototype.load=function(a){return new Ob(this.ie).send().then(_(this,function(b){return this.d=new dc(this.kb).Ua(b),Qc.prototype.load.call(this,a)}))},ed.prototype.xd=function(a){return new Ob(a.toString()).send().then(_(this,function(a){return a=new dc(this.kb).Ua(a),Promise.resolve(a)}))},c(fd,U),Ad=fd.prototype,Ad.be=function(a,b,c){var d=new X;a={stream_id:c.Sb,mime_type:a.n,codecs:a.Z,init_segment:b,references:c.g};var e=ud(this).put(a);return e.onsuccess=function(){d.resolve(c.Sb)},e.onerror=function(){d.reject(e.error)},d},Ad.ae=function(a,b){for(var c=Promise.resolve(),d=0;d<a.length();++d)var e=a.get(d),f=this.Nd.bind(this,e,b),c=c.then(this.He.bind(this,e)),c=c.then(f);return c.then(function(){return Promise.resolve(b)})["catch"](_(this,function(a){return sd(this,b.Sb),Promise.reject(a)}))},Ad.Nd=function(a,b,c){var d=new X;0==b.vb.byteLength&&(b.Ac=a),b.vb=md(b.vb,c),b.Bd++;var e=J({type:"progress",detail:b.Bd/b.We*100,bubbles:!0});if(1048576<=b.vb.byteLength||null==a.endTime){c={stream_id:b.Sb,segment_id:b.Oc,content:b.vb};var f=td(this).put(c);b.g.push({start_time:b.Ac.startTime,start_byte:b.Ac.$a,end_time:a.endTime,url:"idb://"+b.Sb+"/"+b.Oc}),b.Oc++,b.vb=new ArrayBuffer(0),f.onerror=function(){d.reject(f.error)},f.onsuccess=_(this,function(){this.dispatchEvent(e),d.resolve()})}else this.dispatchEvent(e),d.resolve();return d},Ad.He=function(a){return a=new Qb(a.url.toString(),a.$a,a.Eb),a.L=this.P,a.send()},Ad.xc=function(a){return pd(this,a).then(_(this,function(b){var c,d=[];for(c in b.stream_ids)d.push(sd(this,b.stream_ids[c]));return b=vd(this),d.push(b["delete"](a)),Promise.all(d)}))},xd.prototype.destroy=function(){this.jc=null,this.b&&(this.b.destroy(),this.b=null)},xd.prototype.create=function(){if(this.b)return Promise.resolve(this.b);for(var a=[],b=0;b<this.jc.length;++b){var c=this.jc[b];a.push(new ob(c.start_time,c.end_time,c.start_byte,null,new ya(c.url)))}return this.jc=null,this.b=new tb(a),Promise.resolve(this.b)},c(yd,Qc),b("shaka.player.OfflineVideoSource",yd),yd.retrieveGroupIds=function(){var a=new fd(null,null),b=gd(a).then(function(){return qd(a)});return b.then(function(){hd(a)})["catch"](function(){hd(a)}),b},yd.prototype.Te=function(b,c,d,e){var f,g={},h=[];b=new Ob(b);var i=M(c);return b.send().then(_(this,function(a){return this.d=new dc(d).Ua(a),this.d.ia?Promise.reject(Error("Unable to store live streams offline.")):Qc.prototype.load.call(this,i)})).then(_(this,function(){var b=document.createElement("video");return b.src=a.URL.createObjectURL(this.W),f=new hc(null,b,this),R(this.M,f,"sessionReady",this.se.bind(this)),ic(f)})).then(_(this,function(){for(var a=P(this.r),b=0;b<a.length;++b)for(var c=a[b],d=0;d<c.f.length;++d){var f=c.f[d];g[f.K]=f}return e()})).then(_(this,function(a){for(var b=0;b<a.length;++b){var c=a[b],d=g[c];if(!d)return Promise.reject(Error("Invalid stream ID chosen: "+c));h.push(d)}var e=["audio","video"];return h=h.filter(function(a){return 0>e.indexOf(a.n.split("/")[0])?!1:!0}),a=h.map(function(a){return a.I.create()}),Promise.all(a)})).then(_(this,function(a){for(var b=h,c=[],d=0;d<b.length;++d)try{c[d]=this.W.addSourceBuffer($b(b[d]))}catch(e){}if(b.length!=c.length)a=Error("Error initializing streams."),a.type="storage",a=Promise.reject(a);else{for(d=0;d<a.length;++d)(b=a[d])&&c[d].appendBuffer(b);a=Promise.resolve()}return a})).then(_(this,function(){return jc(f,this.timeoutMs)})).then(_(this,function(){return zd(this,h,f.D,this.d.t[0].duration)}))},yd.prototype.store=yd.prototype.Te,yd.prototype.se=function(a){this.nc.push(a.detail.sessionId)},yd.prototype.load=function(a){var b,c,d=new fd(null,null);return gd(d).then(_(this,function(){return pd(d,this.fd)})).then(_(this,function(a){var e=[];this.nc=a.session_ids,b=a.duration,c=a.key_system;for(var f=0;f<a.stream_ids.length;++f)e.push(od(d,a.stream_ids[f]));return Promise.all(e)})).then(_(this,function(d){var e=b,f=c,g=new bc;g.F=5;for(var h=new ac,i=0;i<d.length;++i){var j=d[i],k=new Zb,l=new xd(j.references),m=new Uint8Array(j.init_segment),m=new ya("data:application/octet-stream;base64,"+ca(m)),m=new Ub(new Rb(m,0,null));k.O=l,k.I=m,k.n=j.mime_type,k.Z=j.codecs,j=new ga(f,"",!1,null),l=new _b,l.f.push(k),l.Ma.push(j),l.contentType=k.n.split("/")[0],h.u.push(l),h.duration=e}return g.t.push(h),this.d=g,Qc.prototype.load.call(this,a)})).then(function(){return hd(d),Promise.resolve()})["catch"](function(a){return hd(d),Promise.reject(a)})},yd.prototype.xc=function(){var a=new fd(null,null);return gd(a).then(a.xc.bind(a,this.fd)).then(function(){return hd(a),Promise.resolve()})["catch"](function(b){return hd(a),Promise.reject(b)})},yd.prototype.deleteGroup=yd.prototype.xc,yd.prototype.ac=function(){return this.nc},yd.prototype.ec=function(){return!0}}).bind(e,this)(),"undefined"!=typeof a&&a.exports?a.exports=e.shaka:(d=function(){return e.shaka}.call(b,c,b,a),!(void 0!==d&&(a.exports=d)))}()}});